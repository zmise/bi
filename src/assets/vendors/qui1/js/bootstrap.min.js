/*!
 * Bootstrap v3.3.6 (http://getbootstrap.com)
 * Copyright 2011-2016 Twitter, Inc.
 * Licensed under the MIT license
 */
if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(a){"use strict";var b=a.fn.jquery.split(" ")[0].split(".");if(b[0]<2&&b[1]<9||1==b[0]&&9==b[1]&&b[2]<1||b[0]>2)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 3")}(jQuery),+function(a,b){a.getLoading=function(a,b,c){var a=a||30,b=b||10,c=c||"#666",d='<svg xmlns="http://www.w3.org/2000/svg" width="'+a+'" height="'+b+'" viewBox="0 0 120 30" fill="'+c+'"><circle cx="15" cy="15" r="14.2893"><animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear" repeatCount="indefinite" /><animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear" repeatCount="indefinite" /></circle><circle cx="60" cy="15" r="9.7107" fill-opacity="0.3"><animate attributeName="r" from="9" to="9" begin="0s" dur="0.8s" values="9;15;9" calcMode="linear" repeatCount="indefinite" /><animate attributeName="fill-opacity" from="0.5" to="0.5" begin="0s" dur="0.8s" values=".5;1;.5" calcMode="linear" repeatCount="indefinite" /></circle><circle cx="105" cy="15" r="14.2893"><animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear" repeatCount="indefinite" /><animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear" repeatCount="indefinite" /></circle></svg>';return d}}(window,jQuery)+function(a){"use strict";function b(){var a=document.createElement("bootstrap"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var c in b)if(void 0!==a.style[c])return{end:b[c]};return!1}a.fn.emulateTransitionEnd=function(b){var c=!1,d=this;a(this).one("bsTransitionEnd",function(){c=!0});var e=function(){c||a(d).trigger(a.support.transition.end)};return setTimeout(e,b),this},a(function(){a.support.transition=b(),a.support.transition&&(a.event.special.bsTransitionEnd={bindType:a.support.transition.end,delegateType:a.support.transition.end,handle:function(b){return a(b.target).is(this)?b.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var c=a(this),e=c.data("bs.alert");e||c.data("bs.alert",e=new d(this)),"string"==typeof b&&e[b].call(c)})}var c='[data-dismiss="alert"]',d=function(b){a(b).on("click",c,this.close)};d.VERSION="3.3.6",d.TRANSITION_DURATION=150,d.prototype.close=function(b){function c(){g.detach().trigger("closed.bs.alert").remove()}var e=a(this),f=e.attr("data-target");f||(f=e.attr("href"),f=f&&f.replace(/.*(?=#[^\s]*$)/,""));var g=a(f);b&&b.preventDefault(),g.length||(g=e.closest(".alert")),g.trigger(b=a.Event("close.bs.alert")),b.isDefaultPrevented()||(g.removeClass("in"),a.support.transition&&g.hasClass("fade")?g.one("bsTransitionEnd",c).emulateTransitionEnd(d.TRANSITION_DURATION):c())};var e=a.fn.alert;a.fn.alert=b,a.fn.alert.Constructor=d,a.fn.alert.noConflict=function(){return a.fn.alert=e,this},a(document).on("click.bs.alert.data-api",c,d.prototype.close)}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.button"),f="object"==typeof b&&b;e||d.data("bs.button",e=new c(this,f)),"toggle"==b?e.toggle():b&&e.setState(b)})}var c=function(b,d){this.$element=a(b),this.options=a.extend({},c.DEFAULTS,d),this.isLoading=!1};c.VERSION="3.3.6",c.DEFAULTS={loadingText:"loading..."},c.prototype.setState=function(b){var c="disabled",d=this.$element,e=d.is("input")?"val":"html",f=d.data();b+="Text",null==f.resetText&&d.data("resetText",d[e]()),setTimeout(a.proxy(function(){d[e](null==f[b]?this.options[b]:f[b]),"loadingText"==b?(this.isLoading=!0,d.addClass(c).attr(c,c)):this.isLoading&&(this.isLoading=!1,d.removeClass(c).removeAttr(c))},this),0)},c.prototype.toggle=function(){var a=!0,b=this.$element.closest('[data-toggle="buttons"]');if(b.length){var c=this.$element.find("input");"radio"==c.prop("type")?(c.prop("checked")&&(a=!1),b.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==c.prop("type")&&(c.prop("checked")!==this.$element.hasClass("active")&&(a=!1),this.$element.toggleClass("active")),c.prop("checked",this.$element.hasClass("active")),a&&c.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var d=a.fn.button;a.fn.button=b,a.fn.button.Constructor=c,a.fn.button.noConflict=function(){return a.fn.button=d,this},a(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(c){var d=a(c.target);d.hasClass("btn")||(d=d.closest(".btn")),b.call(d,"toggle"),a(c.target).is('input[type="radio"]')||a(c.target).is('input[type="checkbox"]')||c.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(b){a(b.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(b.type))})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.carousel"),f=a.extend({},c.DEFAULTS,d.data(),"object"==typeof b&&b),g="string"==typeof b?b:f.slide;e||d.data("bs.carousel",e=new c(this,f)),"number"==typeof b?e.to(b):g?e[g]():f.interval&&e.pause().cycle()})}var c=function(b,c){this.$element=a(b),this.$indicators=this.$element.find(".carousel-indicators"),this.options=c,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",a.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",a.proxy(this.pause,this)).on("mouseleave.bs.carousel",a.proxy(this.cycle,this))};c.VERSION="3.3.6",c.TRANSITION_DURATION=600,c.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},c.prototype.keydown=function(a){if(!/input|textarea/i.test(a.target.tagName)){switch(a.which){case 37:this.prev();break;case 39:this.next();break;default:return}a.preventDefault()}},c.prototype.cycle=function(b){return b||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this},c.prototype.getItemIndex=function(a){return this.$items=a.parent().children(".item"),this.$items.index(a||this.$active)},c.prototype.getItemForDirection=function(a,b){var c=this.getItemIndex(b),d="prev"==a&&0===c||"next"==a&&c==this.$items.length-1;if(d&&!this.options.wrap)return b;var e="prev"==a?-1:1,f=(c+e)%this.$items.length;return this.$items.eq(f)},c.prototype.to=function(a){var b=this,c=this.getItemIndex(this.$active=this.$element.find(".item.active"));return a>this.$items.length-1||0>a?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){b.to(a)}):c==a?this.pause().cycle():this.slide(a>c?"next":"prev",this.$items.eq(a))},c.prototype.pause=function(b){return b||(this.paused=!0),this.$element.find(".next, .prev").length&&a.support.transition&&(this.$element.trigger(a.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},c.prototype.next=function(){return this.sliding?void 0:this.slide("next")},c.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},c.prototype.slide=function(b,d){var e=this.$element.find(".item.active"),f=d||this.getItemForDirection(b,e),g=this.interval,h="next"==b?"left":"right",i=this;if(f.hasClass("active"))return this.sliding=!1;var j=f[0],k=a.Event("slide.bs.carousel",{relatedTarget:j,direction:h});if(this.$element.trigger(k),!k.isDefaultPrevented()){if(this.sliding=!0,g&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var l=a(this.$indicators.children()[this.getItemIndex(f)]);l&&l.addClass("active")}var m=a.Event("slid.bs.carousel",{relatedTarget:j,direction:h});return a.support.transition&&this.$element.hasClass("slide")?(f.addClass(b),f[0].offsetWidth,e.addClass(h),f.addClass(h),e.one("bsTransitionEnd",function(){f.removeClass([b,h].join(" ")).addClass("active"),e.removeClass(["active",h].join(" ")),i.sliding=!1,setTimeout(function(){i.$element.trigger(m)},0)}).emulateTransitionEnd(c.TRANSITION_DURATION)):(e.removeClass("active"),f.addClass("active"),this.sliding=!1,this.$element.trigger(m)),g&&this.cycle(),this}};var d=a.fn.carousel;a.fn.carousel=b,a.fn.carousel.Constructor=c,a.fn.carousel.noConflict=function(){return a.fn.carousel=d,this};var e=function(c){var d,e=a(this),f=a(e.attr("data-target")||(d=e.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,""));if(f.hasClass("carousel")){var g=a.extend({},f.data(),e.data()),h=e.attr("data-slide-to");h&&(g.interval=!1),b.call(f,g),h&&f.data("bs.carousel").to(h),c.preventDefault()}};a(document).on("click.bs.carousel.data-api","[data-slide]",e).on("click.bs.carousel.data-api","[data-slide-to]",e),a(window).on("load",function(){a('[data-ride="carousel"]').each(function(){var c=a(this);b.call(c,c.data())})})}(jQuery),+function(a){"use strict";function b(b){var c,d=b.attr("data-target")||(c=b.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,"");return a(d)}function c(b){return this.each(function(){var c=a(this),e=c.data("bs.collapse"),f=a.extend({},d.DEFAULTS,c.data(),"object"==typeof b&&b);!e&&f.toggle&&/show|hide/.test(b)&&(f.toggle=!1),e||c.data("bs.collapse",e=new d(this,f)),"string"==typeof b&&e[b]()})}var d=function(b,c){this.$element=a(b),this.options=a.extend({},d.DEFAULTS,c),this.$trigger=a('[data-toggle="collapse"][href="#'+b.id+'"],[data-toggle="collapse"][data-target="#'+b.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};d.VERSION="3.3.6",d.TRANSITION_DURATION=350,d.DEFAULTS={toggle:!0},d.prototype.dimension=function(){var a=this.$element.hasClass("width");return a?"width":"height"},d.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var b,e=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(e&&e.length&&(b=e.data("bs.collapse"),b&&b.transitioning))){var f=a.Event("show.bs.collapse");if(this.$element.trigger(f),!f.isDefaultPrevented()){e&&e.length&&(c.call(e,"hide"),b||e.data("bs.collapse",null));var g=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[g](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var h=function(){this.$element.removeClass("collapsing").addClass("collapse in")[g](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!a.support.transition)return h.call(this);var i=a.camelCase(["scroll",g].join("-"));this.$element.one("bsTransitionEnd",a.proxy(h,this)).emulateTransitionEnd(d.TRANSITION_DURATION)[g](this.$element[0][i])}}}},d.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var b=a.Event("hide.bs.collapse");if(this.$element.trigger(b),!b.isDefaultPrevented()){var c=this.dimension();this.$element[c](this.$element[c]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var e=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return a.support.transition?void this.$element[c](0).one("bsTransitionEnd",a.proxy(e,this)).emulateTransitionEnd(d.TRANSITION_DURATION):e.call(this)}}},d.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},d.prototype.getParent=function(){return a(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(a.proxy(function(c,d){var e=a(d);this.addAriaAndCollapsedClass(b(e),e)},this)).end()},d.prototype.addAriaAndCollapsedClass=function(a,b){var c=a.hasClass("in");a.attr("aria-expanded",c),b.toggleClass("collapsed",!c).attr("aria-expanded",c)};var e=a.fn.collapse;a.fn.collapse=c,a.fn.collapse.Constructor=d,a.fn.collapse.noConflict=function(){return a.fn.collapse=e,this},a(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(d){var e=a(this);e.attr("data-target")||d.preventDefault();var f=b(e),g=f.data("bs.collapse"),h=g?"toggle":e.data();c.call(f,h)})}(jQuery),+function(a){"use strict";function b(b){var c=b.attr("data-target");c||(c=b.attr("href"),c=c&&/#[A-Za-z]/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,""));var d=c&&a(c);return d&&d.length?d:b.parent()}function c(c){c&&3===c.which||(a(e).remove(),a(f).each(function(){var d=a(this),e=b(d),f={relatedTarget:this};e.hasClass("open")&&(c&&"click"==c.type&&/input|textarea/i.test(c.target.tagName)&&a.contains(e[0],c.target)||(e.trigger(c=a.Event("hide.bs.dropdown",f)),c.isDefaultPrevented()||(d.attr("aria-expanded","false"),e.removeClass("open").trigger(a.Event("hidden.bs.dropdown",f)))))}))}function d(b){return this.each(function(){var c=a(this),d=c.data("bs.dropdown");d||c.data("bs.dropdown",d=new g(this)),"string"==typeof b&&d[b].call(c)})}var e=".dropdown-backdrop",f='[data-toggle="dropdown"]',g=function(b){a(b).on("click.bs.dropdown",this.toggle)};g.VERSION="3.3.6",g.prototype.toggle=function(d){var e=a(this);if(!e.is(".disabled, :disabled")){var f=b(e),g=f.hasClass("open");if(c(),!g){"ontouchstart"in document.documentElement&&!f.closest(".navbar-nav").length&&a(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(a(this)).on("click",c);var h={relatedTarget:this};if(f.trigger(d=a.Event("show.bs.dropdown",h)),d.isDefaultPrevented())return;e.trigger("focus").attr("aria-expanded","true"),f.toggleClass("open").trigger(a.Event("shown.bs.dropdown",h))}return!1}},g.prototype.keydown=function(c){if(/(38|40|27|32)/.test(c.which)&&!/input|textarea/i.test(c.target.tagName)){var d=a(this);if(c.preventDefault(),c.stopPropagation(),!d.is(".disabled, :disabled")){var e=b(d),g=e.hasClass("open");if(!g&&27!=c.which||g&&27==c.which)return 27==c.which&&e.find(f).trigger("focus"),d.trigger("click");var h=" li:not(.disabled):visible a",i=e.find(".dropdown-menu"+h);if(i.length){var j=i.index(c.target);38==c.which&&j>0&&j--,40==c.which&&j<i.length-1&&j++,~j||(j=0),i.eq(j).trigger("focus")}}}};var h=a.fn.dropdown;a.fn.dropdown=d,a.fn.dropdown.Constructor=g,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=h,this},a(document).on("click.bs.dropdown.data-api",c).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",f,g.prototype.toggle).on("keydown.bs.dropdown.data-api",f,g.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",g.prototype.keydown)}(jQuery),+function(a){"use strict";function b(b,d){return this.each(function(){var e=a(this),f=e.data("bs.modal"),g=a.extend({},c.DEFAULTS,e.data(),"object"==typeof b&&b);f||e.data("bs.modal",f=new c(this,g)),"string"==typeof b?f[b](d):g.show&&f.show(d)})}var c=function(b,c){this.options=c,this.$body=a(document.body),this.$element=a(b),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,a.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};c.VERSION="3.3.6",c.TRANSITION_DURATION=300,c.BACKDROP_TRANSITION_DURATION=150,c.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},c.prototype.toggle=function(a){return this.isShown?this.hide():this.show(a)},c.prototype.show=function(b){var d=this,e=a.Event("show.bs.modal",{relatedTarget:b});this.$element.trigger(e),this.isShown||e.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',a.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){d.$element.one("mouseup.dismiss.bs.modal",function(b){a(b.target).is(d.$element)&&(d.ignoreBackdropClick=!0)})}),this.backdrop(function(){var e=a.support.transition&&d.$element.hasClass("fade");d.$element.parent().length||d.$element.appendTo(d.$body),d.$element.show().scrollTop(0),d.adjustDialog(),e&&d.$element[0].offsetWidth,d.$element.addClass("in"),d.enforceFocus();var f=a.Event("shown.bs.modal",{relatedTarget:b});e?d.$dialog.one("bsTransitionEnd",function(){d.$element.trigger("focus").trigger(f)}).emulateTransitionEnd(c.TRANSITION_DURATION):d.$element.trigger("focus").trigger(f)}))},c.prototype.hide=function(b){b&&b.preventDefault(),b=a.Event("hide.bs.modal"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",a.proxy(this.hideModal,this)).emulateTransitionEnd(c.TRANSITION_DURATION):this.hideModal())},c.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(a){document===a.target||this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.trigger("focus")},this))},c.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",a.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},c.prototype.resize=function(){this.isShown?a(window).on("resize.bs.modal",a.proxy(this.handleUpdate,this)):a(window).off("resize.bs.modal")},c.prototype.hideModal=function(){var a=this;this.$element.hide(),this.backdrop(function(){a.$body.removeClass("modal-open"),a.resetAdjustments(),a.resetScrollbar(),a.$element.trigger("hidden.bs.modal")})},c.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},c.prototype.backdrop=function(b){var d=this,e=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var f=a.support.transition&&e;if(this.$backdrop=a(document.createElement("div")).addClass("modal-backdrop "+e).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",a.proxy(function(a){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),f&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;f?this.$backdrop.one("bsTransitionEnd",b).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):b()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var g=function(){d.removeBackdrop(),b&&b()};a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",g).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):g()}else b&&b()},c.prototype.handleUpdate=function(){this.adjustDialog()},c.prototype.adjustDialog=function(){var a=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&a?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!a?this.scrollbarWidth:""})},c.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},c.prototype.checkScrollbar=function(){var a=window.innerWidth;if(!a){var b=document.documentElement.getBoundingClientRect();a=b.right-Math.abs(b.left)}this.bodyIsOverflowing=document.body.clientWidth<a,this.scrollbarWidth=this.measureScrollbar()},c.prototype.setScrollbar=function(){var a=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",a+this.scrollbarWidth)},c.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},c.prototype.measureScrollbar=function(){var a=document.createElement("div");a.className="modal-scrollbar-measure",this.$body.append(a);var b=a.offsetWidth-a.clientWidth;return this.$body[0].removeChild(a),b};var d=a.fn.modal;a.fn.modal=b,a.fn.modal.Constructor=c,a.fn.modal.noConflict=function(){return a.fn.modal=d,this},a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(c){var d=a(this),e=d.attr("href"),f=a(d.attr("data-target")||e&&e.replace(/.*(?=#[^\s]+$)/,"")),g=f.data("bs.modal")?"toggle":a.extend({remote:!/#/.test(e)&&e},f.data(),d.data());d.is("a")&&c.preventDefault(),f.one("show.bs.modal",function(a){a.isDefaultPrevented()||f.one("hidden.bs.modal",function(){d.is(":visible")&&d.trigger("focus")})}),b.call(f,g,this)})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tooltip"),f="object"==typeof b&&b;(e||!/destroy|hide/.test(b))&&(e||d.data("bs.tooltip",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",a,b)};c.VERSION="3.3.6",c.TRANSITION_DURATION=150,c.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},c.prototype.init=function(b,c,d){if(this.enabled=!0,this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.$viewport=this.options.viewport&&a(a.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var e=this.options.trigger.split(" "),f=e.length;f--;){var g=e[f];if("click"==g)this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this));else if("manual"!=g){var h="hover"==g?"mouseenter":"focusin",i="hover"==g?"mouseleave":"focusout";this.$element.on(h+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(i+"."+this.type,this.options.selector,a.proxy(this.leave,this))}}this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.getOptions=function(b){return b=a.extend({},this.getDefaults(),this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},c.prototype.getDelegateOptions=function(){var b={},c=this.getDefaults();return this._options&&a.each(this._options,function(a,d){c[a]!=d&&(b[a]=d)}),b},c.prototype.enter=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),b instanceof a.Event&&(c.inState["focusin"==b.type?"focus":"hover"]=!0),c.tip().hasClass("in")||"in"==c.hoverState?void(c.hoverState="in"):(clearTimeout(c.timeout),c.hoverState="in",c.options.delay&&c.options.delay.show?void(c.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show)):c.show())},c.prototype.isInStateTrue=function(){for(var a in this.inState)if(this.inState[a])return!0;return!1},c.prototype.leave=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),b instanceof a.Event&&(c.inState["focusout"==b.type?"focus":"hover"]=!1),c.isInStateTrue()?void 0:(clearTimeout(c.timeout),c.hoverState="out",c.options.delay&&c.options.delay.hide?void(c.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide)):c.hide())},c.prototype.show=function(){var b=a.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(b);var d=a.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(b.isDefaultPrevented()||!d)return;var e=this,f=this.tip(),g=this.getUID(this.type);this.setContent(),f.attr("id",g),this.$element.attr("aria-describedby",g),this.options.animation&&f.addClass("fade");var h="function"==typeof this.options.placement?this.options.placement.call(this,f[0],this.$element[0]):this.options.placement,i=/\s?auto?\s?/i,j=i.test(h);j&&(h=h.replace(i,"")||"top"),f.detach().css({top:0,left:0,display:"block"}).addClass(h).data("bs."+this.type,this),this.options.container?f.appendTo(this.options.container):f.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var k=this.getPosition(),l=f[0].offsetWidth,m=f[0].offsetHeight;if(j){var n=h,o=this.getPosition(this.$viewport);h="bottom"==h&&k.bottom+m>o.bottom?"top":"top"==h&&k.top-m<o.top?"bottom":"right"==h&&k.right+l>o.width?"left":"left"==h&&k.left-l<o.left?"right":h,f.removeClass(n).addClass(h)}var p=this.getCalculatedOffset(h,k,l,m);this.applyPlacement(p,h);var q=function(){var a=e.hoverState;e.$element.trigger("shown.bs."+e.type),e.hoverState=null,"out"==a&&e.leave(e)};a.support.transition&&this.$tip.hasClass("fade")?f.one("bsTransitionEnd",q).emulateTransitionEnd(c.TRANSITION_DURATION):q()}},c.prototype.applyPlacement=function(b,c){var d=this.tip(),e=d[0].offsetWidth,f=d[0].offsetHeight,g=parseInt(d.css("margin-top"),10),h=parseInt(d.css("margin-left"),10);isNaN(g)&&(g=0),isNaN(h)&&(h=0),b.top+=g,b.left+=h,a.offset.setOffset(d[0],a.extend({using:function(a){d.css({top:Math.round(a.top),left:Math.round(a.left)})}},b),0),d.addClass("in");var i=d[0].offsetWidth,j=d[0].offsetHeight;"top"==c&&j!=f&&(b.top=b.top+f-j);var k=this.getViewportAdjustedDelta(c,b,i,j);k.left?b.left+=k.left:b.top+=k.top;var l=/top|bottom/.test(c),m=l?2*k.left-e+i:2*k.top-f+j,n=l?"offsetWidth":"offsetHeight";d.offset(b),this.replaceArrow(m,d[0][n],l)},c.prototype.replaceArrow=function(a,b,c){this.arrow().css(c?"left":"top",50*(1-a/b)+"%").css(c?"top":"left","")},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},c.prototype.hide=function(b){function d(){"in"!=e.hoverState&&f.detach(),e.$element.removeAttr("aria-describedby").trigger("hidden.bs."+e.type),b&&b()}var e=this,f=a(this.$tip),g=a.Event("hide.bs."+this.type);return this.$element.trigger(g),g.isDefaultPrevented()?void 0:(f.removeClass("in"),a.support.transition&&f.hasClass("fade")?f.one("bsTransitionEnd",d).emulateTransitionEnd(c.TRANSITION_DURATION):d(),this.hoverState=null,this)},c.prototype.fixTitle=function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},c.prototype.hasContent=function(){return this.getTitle()},c.prototype.getPosition=function(b){b=b||this.$element;var c=b[0],d="BODY"==c.tagName,e=c.getBoundingClientRect();null==e.width&&(e=a.extend({},e,{width:e.right-e.left,height:e.bottom-e.top}));var f=d?{top:0,left:0}:b.offset(),g={scroll:d?document.documentElement.scrollTop||document.body.scrollTop:b.scrollTop()},h=d?{width:a(window).width(),height:a(window).height()}:null;return a.extend({},e,g,h,f)},c.prototype.getCalculatedOffset=function(a,b,c,d){return"bottom"==a?{top:b.top+b.height,left:b.left+b.width/2-c/2}:"top"==a?{top:b.top-d,left:b.left+b.width/2-c/2}:"left"==a?{top:b.top+b.height/2-d/2,left:b.left-c}:{top:b.top+b.height/2-d/2,left:b.left+b.width}},c.prototype.getViewportAdjustedDelta=function(a,b,c,d){var e={top:0,left:0};if(!this.$viewport)return e;var f=this.options.viewport&&this.options.viewport.padding||0,g=this.getPosition(this.$viewport);if(/right|left/.test(a)){var h=b.top-f-g.scroll,i=b.top+f-g.scroll+d;h<g.top?e.top=g.top-h:i>g.top+g.height&&(e.top=g.top+g.height-i)}else{var j=b.left-f,k=b.left+f+c;j<g.left?e.left=g.left-j:k>g.right&&(e.left=g.left+g.width-k)}return e},c.prototype.getTitle=function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title)},c.prototype.getUID=function(a){do a+=~~(1e6*Math.random());while(document.getElementById(a));return a},c.prototype.tip=function(){if(!this.$tip&&(this.$tip=a(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},c.prototype.enable=function(){this.enabled=!0},c.prototype.disable=function(){this.enabled=!1},c.prototype.toggleEnabled=function(){this.enabled=!this.enabled},c.prototype.toggle=function(b){var c=this;b&&(c=a(b.currentTarget).data("bs."+this.type),c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c))),b?(c.inState.click=!c.inState.click,c.isInStateTrue()?c.enter(c):c.leave(c)):c.tip().hasClass("in")?c.leave(c):c.enter(c)},c.prototype.destroy=function(){var a=this;clearTimeout(this.timeout),this.hide(function(){a.$element.off("."+a.type).removeData("bs."+a.type),a.$tip&&a.$tip.detach(),a.$tip=null,a.$arrow=null,a.$viewport=null})};var d=a.fn.tooltip;a.fn.tooltip=b,a.fn.tooltip.Constructor=c,a.fn.tooltip.noConflict=function(){return a.fn.tooltip=d,this}}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.popover"),f="object"==typeof b&&b;(e||!/destroy|hide/.test(b))&&(e||d.data("bs.popover",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.init("popover",a,b)};if(!a.fn.tooltip)throw new Error("Popover requires tooltip.js");c.VERSION="3.3.6",c.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),c.prototype=a.extend({},a.fn.tooltip.Constructor.prototype),c.prototype.constructor=c,c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b),a.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof c?"html":"append":"text"](c),a.removeClass("fade top bottom left right in"),a.find(".popover-title").html()||a.find(".popover-title").hide()},c.prototype.hasContent=function(){return this.getTitle()||this.getContent()},c.prototype.getContent=function(){var a=this.$element,b=this.options;return a.attr("data-content")||("function"==typeof b.content?b.content.call(a[0]):b.content)},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var d=a.fn.popover;a.fn.popover=b,a.fn.popover.Constructor=c,a.fn.popover.noConflict=function(){return a.fn.popover=d,this}}(jQuery),+function(a){"use strict";function b(c,d){this.$body=a(document.body),this.$scrollElement=a(a(c).is(document.body)?window:c),this.options=a.extend({},b.DEFAULTS,d),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",a.proxy(this.process,this)),this.refresh(),this.process()}function c(c){return this.each(function(){var d=a(this),e=d.data("bs.scrollspy"),f="object"==typeof c&&c;e||d.data("bs.scrollspy",e=new b(this,f)),"string"==typeof c&&e[c]()})}b.VERSION="3.3.6",b.DEFAULTS={offset:10},b.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight);
},b.prototype.refresh=function(){var b=this,c="offset",d=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),a.isWindow(this.$scrollElement[0])||(c="position",d=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var b=a(this),e=b.data("target")||b.attr("href"),f=/^#./.test(e)&&a(e);return f&&f.length&&f.is(":visible")&&[[f[c]().top+d,e]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){b.offsets.push(this[0]),b.targets.push(this[1])})},b.prototype.process=function(){var a,b=this.$scrollElement.scrollTop()+this.options.offset,c=this.getScrollHeight(),d=this.options.offset+c-this.$scrollElement.height(),e=this.offsets,f=this.targets,g=this.activeTarget;if(this.scrollHeight!=c&&this.refresh(),b>=d)return g!=(a=f[f.length-1])&&this.activate(a);if(g&&b<e[0])return this.activeTarget=null,this.clear();for(a=e.length;a--;)g!=f[a]&&b>=e[a]&&(void 0===e[a+1]||b<e[a+1])&&this.activate(f[a])},b.prototype.activate=function(b){this.activeTarget=b,this.clear();var c=this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]',d=a(c).parents("li").addClass("active");d.parent(".dropdown-menu").length&&(d=d.closest("li.dropdown").addClass("active")),d.trigger("activate.bs.scrollspy")},b.prototype.clear=function(){a(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var d=a.fn.scrollspy;a.fn.scrollspy=c,a.fn.scrollspy.Constructor=b,a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=d,this},a(window).on("load.bs.scrollspy.data-api",function(){a('[data-spy="scroll"]').each(function(){var b=a(this);c.call(b,b.data())})})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tab");e||d.data("bs.tab",e=new c(this)),"string"==typeof b&&e[b]()})}var c=function(b){this.element=a(b)};c.VERSION="3.3.6",c.TRANSITION_DURATION=150,c.prototype.show=function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.data("target");if(d||(d=b.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,"")),!b.parent("li").hasClass("active")){var e=c.find(".active:last a"),f=a.Event("hide.bs.tab",{relatedTarget:b[0]}),g=a.Event("show.bs.tab",{relatedTarget:e[0]});if(e.trigger(f),b.trigger(g),!g.isDefaultPrevented()&&!f.isDefaultPrevented()){var h=a(d);this.activate(b.closest("li"),c),this.activate(h,h.parent(),function(){e.trigger({type:"hidden.bs.tab",relatedTarget:b[0]}),b.trigger({type:"shown.bs.tab",relatedTarget:e[0]})})}}},c.prototype.activate=function(b,d,e){function f(){g.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),b.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),h?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu").length&&b.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),e&&e()}var g=d.find("> .active"),h=e&&a.support.transition&&(g.length&&g.hasClass("fade")||!!d.find("> .fade").length);g.length&&h?g.one("bsTransitionEnd",f).emulateTransitionEnd(c.TRANSITION_DURATION):f(),g.removeClass("in")};var d=a.fn.tab;a.fn.tab=b,a.fn.tab.Constructor=c,a.fn.tab.noConflict=function(){return a.fn.tab=d,this};var e=function(c){c.preventDefault(),b.call(a(this),"show")};a(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',e).on("click.bs.tab.data-api",'[data-toggle="pill"]',e)}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.affix"),f="object"==typeof b&&b;e||d.data("bs.affix",e=new c(this,f)),"string"==typeof b&&e[b]()})}var c=function(b,d){this.options=a.extend({},c.DEFAULTS,d),this.$target=a(this.options.target).on("scroll.bs.affix.data-api",a.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",a.proxy(this.checkPositionWithEventLoop,this)),this.$element=a(b),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};c.VERSION="3.3.6",c.RESET="affix affix-top affix-bottom",c.DEFAULTS={offset:0,target:window},c.prototype.getState=function(a,b,c,d){var e=this.$target.scrollTop(),f=this.$element.offset(),g=this.$target.height();if(null!=c&&"top"==this.affixed)return c>e?"top":!1;if("bottom"==this.affixed)return null!=c?e+this.unpin<=f.top?!1:"bottom":a-d>=e+g?!1:"bottom";var h=null==this.affixed,i=h?e:f.top,j=h?g:b;return null!=c&&c>=e?"top":null!=d&&i+j>=a-d?"bottom":!1},c.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(c.RESET).addClass("affix");var a=this.$target.scrollTop(),b=this.$element.offset();return this.pinnedOffset=b.top-a},c.prototype.checkPositionWithEventLoop=function(){setTimeout(a.proxy(this.checkPosition,this),1)},c.prototype.checkPosition=function(){if(this.$element.is(":visible")){var b=this.$element.height(),d=this.options.offset,e=d.top,f=d.bottom,g=Math.max(a(document).height(),a(document.body).height());"object"!=typeof d&&(f=e=d),"function"==typeof e&&(e=d.top(this.$element)),"function"==typeof f&&(f=d.bottom(this.$element));var h=this.getState(g,b,e,f);if(this.affixed!=h){null!=this.unpin&&this.$element.css("top","");var i="affix"+(h?"-"+h:""),j=a.Event(i+".bs.affix");if(this.$element.trigger(j),j.isDefaultPrevented())return;this.affixed=h,this.unpin="bottom"==h?this.getPinnedOffset():null,this.$element.removeClass(c.RESET).addClass(i).trigger(i.replace("affix","affixed")+".bs.affix")}"bottom"==h&&this.$element.offset({top:g-b-f})}};var d=a.fn.affix;a.fn.affix=b,a.fn.affix.Constructor=c,a.fn.affix.noConflict=function(){return a.fn.affix=d,this},a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var c=a(this),d=c.data();d.offset=d.offset||{},null!=d.offsetBottom&&(d.offset.bottom=d.offsetBottom),null!=d.offsetTop&&(d.offset.top=d.offsetTop),b.call(c,d)})})}(jQuery),+function(a){"use strict";function b(b){b&&a(b.target).hasClass("ctrl")||b&&3===b.which||(a(j).remove(),a(".open.select-menu").each(function(){a(this).removeClass("open")}))}function c(a){a.stopPropagation()}function d(b,c){var d;d=b.$select.find(".select-tag"),0==d.length&&(d=a('<div class="row select-tag"></div>'),b.$select.prepend(d)),d.empty(),a.each(c,function(c,e){var f=a('<div class="col-sm-4"><div class="tag-item" data-id="'+e.id+'"><span class="tag-val" title="'+e.name+'">'+e.name+'</span><span class="tag-delete">&times;</span></div></div>');f.find(".tag-delete").on("click",b.tagDelete.bind(b)),d.append(f)})}function e(a,b,c,d){var e="";e="string"==typeof d?d:d.name,-1!==e.indexOf(c)&&(a.option.highlight&&(e=e.replace(c,'<font style="color: red;">'+c+"</font>")),b.append(a.createItem({id:d.id,name:e})))}function f(b,c,d){if(c.toggleClearBtn(),0==b.children().length){var e=c.option.notFoundFormater;e?b.append("<li>"+(a.isFunction(e)?e(d):e)+"</li>"):d?b.append('<li><div class="no-data">没有找到 “<span>'+(d||"")+"</span>”</div></li>"):b.append('<li><div class="no-data">暂无数据！</div></li>')}if(c.option.beforeOpen&&a.isFunction(c.option.beforeOpen)){var f=c.option.beforeOpen(c);if(f===!1)return}b.hasClass("open")||b.addClass("open")}function g(){var b=a(document).find(".select-menu.open");b.length>0&&h(b)}function h(b){var c=a(document).data("scroll_top")||99999,d=a(document).scrollTop();a(document).data("scroll_top",d);var e=b.height()+12,f=a(window).height(),g=b.prev().offset().top,h=b.closest(".select"),i=g-d,j=d-g+f-h.height();d>c?j>e?h.hasClass("dropup")&&h.removeClass("dropup"):j>i&&h.hasClass("dropup")&&h.removeClass("dropup"):j>e?h.hasClass("dropup")&&h.removeClass("dropup"):e>j&&i>e?h.hasClass("dropup")||h.addClass("dropup"):i>j&&(h.hasClass("dropup")||h.addClass("dropup"))}function i(b){if(b=b||{},b.$el=a(this),1===b.$el.length)return new k(b);if(b.$el.length>1){var c=[];return b.$el.each(function(d,e){b.$el=a(e),c.push(new k(b))}),c}}var j=".select-backdrop",k=function(a){this.option=a,this.el=a.$el,this.render(),this.el.data("select",this)};k.VERSION="3.3.6",k.prototype._renderFromTag=function(b){var c=this;this.isSelect=!0,this.el.hide(),this.data=[];var d="";if(this.el.next().hasClass("select"))d=this.el.next();else{var d=a('<div class="select"></div>');this.el.after(d)}d.empty(),d.append(b),this.el.children().length>0&&this.el.children().each(function(b,d){var e=a(d),f={id:e.val(),name:e.text()},g=c.createItem(f);c.$ul.append(g),c.data.push(f),c.option.multiple&&e.attr("selected")&&(c.value||(c.value=[]),c.value.push(f),g.find("input:checkbox").attr("checked",!0))}),d.append(this.$ul)},k.prototype._renderTree=function(b){var c=a('<div class="select"></div>');if(this.el.empty(),this.el.append(c),c.append(b),this.option.search){this.$ul=a('<div class="select-menu"></div>'),this.$select=this.$ul;var d=a('<div class="select-search-div"></div>'),e=a('<input class="form-control">');d.append(e),this.$ul.append(d),c.append(this.$ul);var f=a('<div class="panel-tree"></div>');this.$ul.append(f),this.tree=f.tree(this.option.treeOption),this.tree.el.on("bs.tree.select",this.treeSelect.bind(this)).on("bs.tree.unselect",this.treeUnSelect.bind(this)).on("bs.tree.change",this.treeChange.bind(this)).on("bs.tree.render",this.treeRender.bind(this)),e.on("keyup.bs.select",this.treeSearch.bind(this))}else{this.$ul=a('<div class="select-menu"></div>');var f=a('<div class="panel-tree"></div>');this.$ul.append(f),this.$select=this.$ul,c.append(this.$ul),this.tree=f.tree(this.option.treeOption),this.tree.el.on("bs.tree.select",this.treeSelect.bind(this)).on("bs.tree.unselect",this.treeUnSelect.bind(this)).on("bs.tree.change",this.treeChange.bind(this))}},k.prototype._renderFromData=function(b){var c=this;if(this.el.empty(),this.el.append(b),this.data=[],this.option.data&&this.option.data.length>0)a.each(this.option.data,function(a,b){"string"==typeof b&&(b={id:b,name:b}),c.$ul.append(c.createItem(b)),c.data.push(b)});else{var d=c.option.noDataFormater;d?c.$ul.append("<li>"+(a.isFunction(d)?d():d)+"</li>"):c.$ul.append("<li><div>暂无数据！</div></li>")}this.el.append(this.$ul)},k.prototype._renderFromUrl=function(b){if(this.el.empty(),this.el.append(b),this.option.multiple){if(this.$select=a('<div class="select-menu" style="max-height: none;"></div>'),this.option.search){var c=a('<div class="select-search-div"></div>'),d=a('<input class="form-control">'),e=null,f=this;d.on("input.bs.select",function(a){e&&clearTimeout(e),e=setTimeout(f.search.bind(f,a),100)}),c.append(d),this.$select.append(c)}var g='<li><div class="loading">'+getLoading()+"</div></li>";this.$ul.append(g),this.$ul.removeClass("select-menu").css({padding:"0",overflow:"auto",height:"210px"}),this.$select.append(this.$ul),this.renderFooter(),this.el.append(this.$select)}else{var g='<li><div class="loading">'+getLoading()+"</div></li>";this.$ul.append(g),this.el.append(this.$ul)}},k.prototype.renderFooter=function(){var c=this,d=a('<div class="select-footer"></div>');if(!this.option.hideButton){var e=a('<button class="btn btn-default footer-btn">'+(this.option.buttonText||"确定")+"</button>");e.on("click",function(a){if(c.option.buttonConfirm){var d=c.option.buttonConfirm.call(c,a);d!==!1&&b()}else b()}),d.append(e),this.$select.append(d)}},k.prototype.render=function(){var b=this.option,c=this.createCtrl();this.$ul=a('<ul class="select-menu"></ul>'),this.$select=this.$ul,"SELECT"==this.el[0].tagName?this._renderFromTag(c):b.treeOption?this._renderTree(c):b.data?this._renderFromData(c):b.url&&this._renderFromUrl(c),b.search||b.multiple||b.treeOption||c.before('<span class="scaret"></span>'),this.option.value&&this.setValue(this.option.value),c.on("click.bs.select",this.toggle.bind(this)).on("keydown.bs.select.data-api",k.prototype.keydown)},k.prototype.createItem=function(b){var c=a("<li>"),d=null,e=b.name;return this.option.highlight&&(e=a("<div>"+b.name+"</div>").text()),d=a(this.option.itemFormater?this.option.itemFormater(b):this.option.multiple?'<a href="javascript:;" title="'+e+'" data-id="'+b.id+'"><input type="checkbox"> '+b.name+"</a>":'<a href="javascript:;" title="'+e+'" data-id="'+b.id+'">'+b.name+"</a>"),d.on("click.bs.select.data-api",this.selectItem.bind(this)),c.append(d),c},k.prototype.createCtrl=function(){var b=null;if(!this.option.search||this.option.multiple||this.option.treeOption){for(var c=this.el.find("option"),d=a(c[0]).text(),e=0;e<c.length;e++)if(c[e].selected){d=a(c[e]).text();break}b=a('<button type="button" class="form-control ctrl"'+(this.option.disabled?" disabled":" ")+">"+(d||this.option.placeholder||"")+"</button>")}else b=a('<input class="form-control ctrl"'+(this.option.disabled?" disabled":" ")+'placeholder="'+(this.option.placeholder||"")+'">'),this.option.url?b.on("keyup.bs.select",this.search.bind(this)):b.on("keyup.bs.select",this.filter.bind(this));return b},k.prototype.setValue=function(b){var c=this._findCtrl();this.value=b;var e=[],f=[],g="",h="";this.option.multiple?(a.each(this.value,function(a,b){e.push(b.id),f.push(b.name)}),g=e.join(","),h=f.join(","),this._checkedValue(e),this.option.search&&d(this,b)):(g=b.id,h=b.name),this.option.search&&!this.option.multiple?c.val(h):c.text(h),c.data("id",g),c.attr("title",h),this.isSelect&&this.$ul.parent().prev().val(g),this.toggleClearBtn()},k.prototype._getValueBy=function(b,c){if(this.option.multiple&&a.isArray(c)){for(var d=[],e=0;e<c.length;e++)for(var f=0;f<this.data.length;f++)c[e]==this.data[f][b]&&d.push(this.data[f]);return d}for(var c,f=0;f<this.data.length;f++)c==this.data[f][b]&&(c=this.option.multiple?[this.data[f]]:this.data[f]);return c},k.prototype.setValueById=function(a){if(this.data){var b=this._getValueBy("id",a);b&&this.setValue(b)}},k.prototype.setValueByName=function(a){if(this.data){var b=this._getValueBy("name",a);b&&this.setValue(b)}},k.prototype.toggleClearBtn=function(){if(this.option.search||this.option.multiple||this.option.treeOption){var b=this._findCtrl();if(b.text()||b.val()){if(this.option.placeholder&&(b.text().trim()==this.option.placeholder||b.val().trim()==this.option.placeholder))return;if(b.prev().hasClass("form-control-feedback"))return;var c=a('<span class="glyphicon glyphicon-remove form-control-feedback"></span>');c.on("click.bs.select",this.handleClear.bind(this)),b.before(c)}else b.prev().hasClass("form-control-feedback")&&(b.prev().remove(),b.text(this.option.placeholder||""));this.option.disabled?this.isSelect?this.el.next().find(".glyphicon-remove").hide():this.el.find(".glyphicon-remove").hide():this.isSelect?this.el.next().find(".glyphicon-remove").show():this.el.find(".glyphicon-remove").show()}},k.prototype.tagDelete=function(b){var c=a(b.currentTarget).parent();this.option.treeOption?this.tree.unCheck(c.data("id")):(this.$ul.find('a[data-id="'+c.data("id")+'"] input').prop("checked",!1),this._removeValueItem({id:c.data("id")}),this.triggerSelect()),b.stopPropagation()},k.prototype._findCtrl=function(){return this.isSelect?this.el.next().find(".ctrl"):this.el.find(".ctrl")},k.prototype.handleClear=function(a){var b=this._findCtrl();this.clearValue();var c={currentTarget:b[0]};this.$select.removeClass("open"),this.toggle(c),b.focus(),this.$select.find(".select-search-div input").focus(),a.stopPropagation()},k.prototype.clearValue=function(a){var b=this._findCtrl();this.option.multiple&&this.$ul.find(":checked").prop("checked",!1),this.option.treeOption&&this.tree.clearValue();var c=this.$select.parent().prev();this.isSelect&&(c.find("option[selected]").attr("selected",!1),c.val("")),!this.option.search||this.option.treeOption||this.option.multiple?(b.text(this.option.placeholder||""),this.$select.find(".select-search-div input").val("")):b.val(""),b.data("id",""),this.option.search&&this.el.find(".select-tag").remove(),this.value=void 0,b.prev().remove(),this.el.trigger("bs.select.clear",[this])},k.prototype.treeUnSelect=function(b,c){var d=this;a.each(c,function(a,b){d._removeValueItem(b)}),this.el.trigger("bs.select.unselect",[c,this])},k.prototype._isExists=function(a){if(!this.value)return!1;for(var b=0;b<this.value.length;b++)if(a.id==this.value[b].id)return!0;return!1},k.prototype.treeSelect=function(b,c){var d=this;a.each(c,function(a,b){d._isExists(b)||d._addValueItem(b)}),this.el.trigger("bs.select.select",[c,this])},k.prototype.treeChange=function(b){var c=this.$ul,e=c.prev(),f=[],g=[];a.each(this.value,function(a,b){f.push(b.id),g.push(b.name)}),e.text(g.join(",")),e.attr("title",e.text()),e.data("id",f.join(",")),this.option.search&&d(this,this.value),this.toggleClearBtn(),this.el.trigger("bs.select.change",[this.value,this])},k.prototype.treeRender=function(b){var c=[];a.each(this.value||[],function(a,b){c.push(b.id)}),c&&this._checkedValue(c)},k.prototype._selectedOption=function(){var b=this.$select.parent().prev();this.option.multiple?b.val(a.map(this.value,function(a){return a.id+""})):b.val(this.value.id+"")},k.prototype.selectItem=function(c){var d=this.$select,e=d.prev(),f=a(c.currentTarget).text(),g=a(c.currentTarget).data("id"),h={id:g,name:f};if(this.option.multiple){var i=a(c.currentTarget).find("input");if("INPUT"!==c.target.tagName&&i.prop("checked",!i.prop("checked")),i.prop("checked")){var c=a.Event("bs.select.select",{target:c.currentTarget});this.el.trigger(c,[h,this]),this._addValueItem(h)}else{var c=a.Event("bs.select.unselect",{target:c.currentTarget});this.el.trigger(c,[h,this]),this._removeValueItem(h)}this.triggerSelect(),this.isSelect&&this._selectedOption()}else{this.value=h,this.option.search?e.val(f):e.text(f),e.data("id",g),e.attr("title",f),this.isSelect&&this._selectedOption(),this.toggleClearBtn(),b(c);var j=a.Event("bs.select.change",{target:c.currentTarget}),k=a.Event("bs.select.select",{target:c.currentTarget});this.el.trigger(j,[h,this]),this.el.trigger(k,[h,this])}},k.prototype.treeSearch=function(a){this.tree.search(a,this.value)},k.prototype._addValueItem=function(a){this.value=this.value||[],this.value.push(a)},k.prototype._removeValueItem=function(a){for(var b=this,c=0;c<b.value.length;c++)if(b.value[c].id===a.id){b.value.splice(c,1);break}},k.prototype.triggerSelect=function(){var b=this.$select,c=b.prev(),e=[],f=[];a.each(this.value,function(a,b){e.push(b.name),f.push(b.id)});var g=e.join(",");this.option.search&&d(this,this.value),c.data("id",f.join(",")),c.text(g),c.attr("title",g),this.toggleClearBtn(),this.el.trigger("bs.select.change",[this.value,this]);var h=this.$select.find(".select-search-div input");h.length>0&&h[0].select()},k.prototype.getId=function(){var a=this.$select.prev().data("id");return void 0===a&&(a=""),this.option.multiple?a.split(","):a},k.prototype.getName=function(){var a="";return a=this.option.search&&!this.option.multiple?this.$select.prev().val():this.$select.prev().text(),a=a.replace(this.option.placeholder,""),this.option.multiple?a?a.split(","):[]:a||""},k.prototype.getValue=function(){var b=this.getId(),c=this.getName();if(!this.option.multiple)return{id:b,name:c};var d=[];return a.each(b,function(a){d.push({id:b[a],name:c[a]})}),d},k.prototype.enable=function(){this.isSelect?this.el.next().find(".ctrl").attr("disabled",!1):this.el.find(".ctrl").attr("disabled",!1),this.el.find(".glyphicon-remove").show()},k.prototype.disable=function(){this.isSelect?(this.el.next().find(".ctrl").attr("disabled",!0),this.el.next().find(".glyphicon-remove").hide()):(this.el.find(".ctrl").attr("disabled",!0),this.el.find(".glyphicon-remove").hide())},k.prototype.setParams=function(a){this.option.params=a},k.prototype.setInitData=function(a){this.option.initData=a},k.prototype._checkedValue=function(b){var c=this;this.option.treeOption?this.tree._checkedValue(b):a.each(b,function(a,b){c.$ul.find('a[data-id="'+b+'"] input').prop("checked",!0)})},k.prototype.search=function(b){var c=this;this.data=[];var d=this.option.params||{},e=a(b.currentTarget).val();if(c.lastJQXHR&&4!==c.lastJQXHR.readyState&&c.lastJQXHR.abort(),this.option.multiple&&(e=this.$select.find(".select-search-div input").val()),!e&&(a(b.currentTarget).prev().hasClass("glyphicon-remove")&&a(b.currentTarget).prev().remove(),this.option.search&&this.option.initData)){if(this.$ul.empty(),this.option.initMark&&this.$ul.append('<li class="init-mark">'+this.option.initMark+"</li>"),a.each(this.option.initData,function(a,b){c.$ul.append(c.createItem(b))}),this.option.multiple){var g=this.$select.prev().data("id");void 0===g&&(g=""),this._checkedValue(g.split(","))}}else d[this.option.keyword||"q"]=e,c.lastJQXHR=a.ajax({data:d,url:this.option.url}).done(function(b){if(c.$ul.empty(),c.option.dataFormater&&(b=c.option.dataFormater(b)),a.each(b,function(a,b){var d="",f="";"string"==typeof b?(d=b,f=d):(d=b.name,f=b.id||b.name,c.option.nameField&&(d=b[c.option.nameField]+""),c.option.idField&&(f=b[c.option.idField])),b.id=f,b.name=d,c.option.highlight&&(d=d.replace(e,'<font style="color: red;">'+e+"</font>")),c.$ul.append(c.createItem(b)),c.data.push(b)}),c.option.multiple){var d=c.$select.prev().data("id");void 0===d&&(d=""),c._checkedValue(d.split(","))}f(c.$ul,c,e)})},k.prototype.filter=function(b){var c=this,d=a(b.currentTarget),g=d.val(),h=d.next();h.empty(),!g&&d.prev().hasClass("glyphicon-remove")&&d.prev().remove(),this.isSelect?this.el.children().each(function(b,d){e(c,h,g,{id:a(d).val(),name:a(d).text()})}):a.each(this.option.data,function(a,b){e(c,h,g,b)}),f(h,this,g)},k.prototype.toggle=function(c){var d=a(c.currentTarget);if(!d.is(".disabled, :disabled")){if(this.option.beforeOpen&&a.isFunction(this.option.beforeOpen)){var e=this.option.beforeOpen(this);if(e===!1)return}var f=this.$select.hasClass("open");if(f)a(j).remove(),a(".select-menu").removeClass("open");else if("ontouchstart"in document.documentElement&&!this.$select.closest(".navbar-nav").length&&a(document.createElement("div")).addClass("select-backdrop").insertAfter(d).on("click",b),this.$select.css("width",this.option.width||d.css("width")),this.$ul.css("max-height",35*(this.option.rows||10)+2+"px"),h(this.$select),this.$select.hasClass("open"))this.$select.remvoeClass("open");else{b(),this.$select.addClass("open");this.option.search&&(this.$select.find(".select-search-div input").focus(),this.option.url?this.search(c):this.option.data&&this.filter(c))}}},k.prototype.keydown=function(b){if(/(38|40|27)/.test(b.which)){var c=a(this);if(b.preventDefault(),b.stopPropagation(),!c.is(".disabled, :disabled")){var d=c;c.hasClass("select-menu")||(d=c.next());var e=d.hasClass("open");if(!e&&27!=b.which||e&&27==b.which)return 27==b.which&&c.trigger("focus"),c.trigger("click");var f=" li:not(.disabled):visible a",g=d.find(f);if(g.length){var h=g.index(b.target);38==b.which&&0>=h?h=g.length-1:38==b.which&&h>0?h--:40==b.which&&h<g.length-1?h++:40==b.which&&h>=g.length-1&&(h=0),~h||(h=0),g.eq(h).trigger("focus")}}}};var l=a.fn.select;a.fn.select=i,a.fn.select.Constructor=k,a.fn.select.noConflict=function(){return a.fn.select=l,this},a(document).on("click.bs.select",b).on("keydown.bs.select.data-api",".select-menu",k.prototype.keydown).on("click.bs.select.data-api",".select-menu",c).on("scroll.bs.select.data-api",g),a(function(){var b=a('select[data-toggle="select"]');a.each(b,function(b,c){var d=a(c),e={};d.attr("multiple")&&(e.multiple=!0),d.select(e)})})}(jQuery),+function(a){"use strict";function b(b){a(b.currentTarget).parent().parent().find("ul").toggle(),a(b.currentTarget).parent().parent().find(".fold").toggleClass("unfold")}function c(a){a.find("li").length&&(a.children("p.branch").children("label").find("input").prop("checked")?a.children("p.branch").next().find("input").prop("checked",!0):a.children("p.branch").next().find("input").prop("checked",!1))}function d(b){if(b.children("p.branch").children("label").find("input").prop("checked")){var c=!0;b.siblings("li").each(function(){a(this).children("p.branch").children("label").find("input").prop("checked")||(c=!1)}),c&&(b.parent().parent().children("p.branch").children("label").find("input").prop("checked",!0),d(b.parent().parent()))}else b.parent().parent().length&&"LI"===b.parent().parent()[0].tagName&&(b.parent().parent().children("p.branch").children("label").find("input").prop("checked",!1),d(b.parent().parent()))}function e(b){return b=b||{},b.$el=a(this),new f(b)}var f=function(a){this.option=a,this.el=a.$el,this.render(this.option.data||this.option.url)};f.VERSION="3.3.6",f.prototype.clearValue=function(){this.el.find("input:checked").prop("checked",!1)},f.prototype.unCheck=function(a){var b=this.el.find("input[data-id="+a+"]");b.prop("checked",!1),c(b.parent()),d(b.parent()),this.triggerSelect(b)},f.prototype.render=function(b){if("string"==typeof b)this.getUrlData(b);else{var c=a("<ul></ul>");c=this.createNode(c,b,0),this.hiddenRoot(c),this.el.empty().append(c),this.eachTree(c),this.el.trigger("bs.tree.render",[this])}},f.prototype.search=function(b){var c={};c[this.option.keyword||"q"]=a(b.target).val(),this.getUrlData(this.option.url,c)},f.prototype.hiddenRoot=function(a){if(this.option.hiddenRoot){a.addClass("indent-gap");var b=a.children(":first").children(":first");b.remove()}},f.prototype.eachTree=function(b){var e=this;b.find("li").length&&a.each(b.find("li"),function(){e.mathSelectValues(a(this).children("p.branch").children("label").find("span").text())&&a(this).children("p.branch").children("label").find("input").prop("checked",!0),c(a(this)),d(a(this))})},f.prototype.getUrlData=function(b,c){var d=this;a.ajax({url:b,data:c,dataType:"json"}).then(function(b){d.option.dataFormater&&a.isFunction(d.option.dataFormater)&&(b=d.option.dataFormater(b)),d.render(b)})},f.prototype.mathSelectValues=function(b){var c=this.option.selectValues||[],d=!1;return c.length&&a.each(c,function(a,c){-1!==b.indexOf(c)&&(d=!0)}),d},f.prototype._checkedValue=function(b){var c=this;a.each(b,function(a,b){var d=c.el.find('input[data-id="'+b+'"]');d.prop("checked",!0)})},f.prototype.outputVal=function(b){b.stopPropagation();var e=a(b.currentTarget).parent().parent().parent();c(e),d(e),this.triggerSelect(a(b.currentTarget))},f.prototype.triggerSelect=function(b){var c=b.prop("checked"),d=b.hasClass("leaf"),e=[];this.el.find("input.leaf:checked").each(function(b,c){e.push({id:a(c).data("id"),name:a(c).next().text()})});var f=[];d?f=[{id:b.data("id"),name:b.next().text()}]:b.parent().parent().next().find("input.leaf").each(function(b,c){f.push({id:a(c).data("id"),name:a(c).next().text()})}),c?this.el.trigger("bs.tree.select",[f]):this.el.trigger("bs.tree.unselect",[f]),this.el.trigger("bs.tree.change",[e])},f.prototype.createNode=function(c,d,e){if(d){var f,g=d.id,h=d.name,i=d.children;if(this.option.idField&&(g=d[this.option.idField]),this.option.nameField&&(h=d[this.option.nameField]),this.option.childrenField&&(i=d[this.option.childrenField]),!i)return f=a('<li class="leaf-box"><p class="branch" style="padding-left: '+(e>1?22*e+15.5+10:37*e+10)+'px;"><label class="panel-checkbox"><input class="leaf" type="checkbox" data-id="'+g+'"><span class="name-val">'+h+"</span></label></p></li>"),f.find("input").on("click.bs.tree",this.outputVal.bind(this)),c.append(f),c;var j=a('<span class="fold unfold"><i class="h-line"></i><i class="v-line"></i></span>');j.on("click.bs.tree",b),f=a('<li><p class="branch" style="padding-left: '+(22*e+10)+'px;"><label class="panel-checkbox"><input type="checkbox" data-id="'+g+'"><span class="name-val">'+h+"</span></label></p></li>"),f.find("input").on("click.bs.tree",this.outputVal.bind(this)),f.find("label").before(j),c.append(f),e++;var k=a("<ul></ul>");c.find("li:last p").after(k);var l=this;return a.each(i,function(a,b){l.createNode(k,b,e)}),c}};var g=a.fn.select;a.fn.tree=e,a.fn.tree.Constructor=f,a.fn.tree.noConflict=function(){return a.fn.tree=g,this}}(jQuery),+function(a){var b=function(b,c){this._id=(65536*(1+Math.random())|0).toString(16),this._loadCount=0,this.opts=c,this._initLayout(a(b)),this._initHead(),this._initOptions(),this._initEvents(),this._setColsWidth(),this.opts.fullWidthRows&&this._fullWidthRows();for(var d=0;d<this.opts.plugins.length;d++){var e=this.opts.plugins[d];e.init(a.extend(b,this))}if(c.autoLoad){var f=this;this.opts=c,setTimeout(function(){c.url?f.load():f.load(c.items)},0)}},c=function(){var a=!!window.ActiveXObject,b=a&&!!window.atob,c=a&&document.addEventListener&&!window.atob,d=a&&document.querySelector&&!document.addEventListener,e=a&&window.XMLHttpRequest&&!document.querySelector,f=a&&!window.XMLHttpRequest;return{isIE:a,isIE6:f,isIE7:e,isIE8:d,isIE9:c,isIE10:b}}();b.prototype={_initLayout:function(b){var d=this.opts,e=b.parent(),f=b.index(),g=['<div class="mmGrid">',"<style></style>",'<div class="mmg-headWrapper">','<table class="mmg-head" cellspacing="0"></table>',"</div>",'<div class="mmg-colResizePointer"></div>','<div class="mmg-colResizePointer-before"></div>','<div class="mmg-backboard">','<a class="mmg-btnBackboardUp"><i class="glyphicon glyphicon-arrow-up"></i></a>',"</div>",'<div class="mmg-bodyWrapper"></div>','<a class="mmg-btnBackboardDn"><i class="glyphicon glyphicon-arrow-down"></i></a>','<div class="mmg-message">'+this.opts.noDataText+"</div>",'<div class="mmg-mask mmg-transparent"></div>','<div class="mmg-loading">','<div class="mmg-loadingImg"></div>','<div class="mmg-loadingText">'+this.opts.loadingText+"</div>","</div>","</div>"];(c.isIE7||c.isIE6)&&b.prop("cellspacing",0);var h=a(g.join(""));if(this.$mmGrid=h,this.$style=h.find("style"),this.$headWrapper=h.find(".mmg-headWrapper"),this.$head=h.find(".mmg-head"),this.$backboard=h.find(".mmg-backboard"),this.$bodyWrapper=h.find(".mmg-bodyWrapper"),this.$body=b.removeAttr("style").addClass("mmg-body"),this._insertEmptyRow(),this.$body.appendTo(this.$bodyWrapper),0===f||0==e.children().length?e.prepend(this.$mmGrid):e.children().eq(f-1).after(this.$mmGrid),!c.isIE6||d.width&&"auto"!==d.width?h.width(d.width):(h.width("100%"),h.width(h.width()-(h.outerWidth(!0)-h.width()))),!c.isIE6||d.height&&"auto"!==d.height?h.height(d.height):(h.height("100%"),h.height(h.height()-(h.outerHeight(!0)-h.height()))),d.checkCol){var i=d.multiSelect?'<input type="checkbox" class="checkAll" >':'<input type="checkbox" disabled="disabled" class="checkAll">';d.cols.unshift({title:i,width:20,align:"center",lockWidth:!0,checkCol:!0,renderer:function(){return'<input type="checkbox" class="mmg-check">'}})}d.indexCol&&d.cols.unshift({title:"#",width:d.indexColWidth,align:"center",lockWidth:!0,indexCol:!0,renderer:function(a,b,c){return'<label class="mmg-index">'+(c+1)+"</label>"}})},_expandCols:function(a){var b=[];if(!a)return b;for(var c=0;c<a.length;c++){var d=a[c];d.cols?(b.push(d),b.push.apply(b,this._expandCols(d.cols))):b.push(d)}return b},_leafCols:function(){for(var a=this.opts,b=[],c=this._expandCols(a.cols),d=0;d<c.length;d++){var e=c[d];e.cols||b.push(e)}return b},_expandThs:function(){return this.$head.find("th").sort(function(b,c){return parseInt(a(b).data("colindex"))-parseInt(a(c).data("colindex"))})},_leafThs:function(){return this.$head.find("th").filter(function(){return!a.data(this,"col").cols}).sort(function(b,c){return parseInt(a(b).data("colindex"))-parseInt(a(c).data("colindex"))})},_colsWithTitleDeep:function(a,b){var c=[];if(!a)return c;for(var d=0;d<a.length;d++){var e=a[d];1===b?c.push(e):c.push.apply(c,this._colsWithTitleDeep(e.cols,b-1))}return c},_titleDeep:function(a){for(var b=1,c=0;c<a.length;c++){var d=a[c];if(d.cols){var e=1+this._titleDeep(d.cols);e>b&&(b=e)}}return b},_titleHtml:function(b,c){var d=this.opts,e=[];if(b.cols){var f=b.cols.length;a.each(b.cols,function(a,b){b.hidden&&f--}),0===f&&(b.hidden=!0),e.push('<th class="');var g=a.inArray(b,this._expandCols(d.cols));e.push(this._genColClass(g)),e.push(' mmg-groupCol" '),e.push(' rowspan="'),e.push(c-1),e.push('" colspan="'),e.push(f),e.push('" data-colIndex="'),e.push(g),e.push('" >'),e.push('<div class="mmg-titleWrapper" >'),e.push('<span class="mmg-title '),b.sortable&&e.push("mmg-canSort "),e.push('">'),b.titleHtml?e.push(b.titleHtml):e.push(b.title),e.push('</span><div class="mmg-sort"></div>'),e.push("</div></th>")}else{e.push('<th class="');var g=a.inArray(b,this._expandCols(d.cols));e.push(this._genColClass(g)),
e.push(' " '),e.push(' rowspan="'),e.push(c),e.push('" colspan="'),e.push(1),e.push('" data-colIndex="'),e.push(g),e.push('" >'),e.push('<div class="mmg-titleWrapper" >'),e.push('<span class="mmg-title '),b.sortable&&e.push("mmg-canSort "),e.push('">'),b.titleHtml?e.push(b.titleHtml):e.push(b.title),e.push('</span><div class="mmg-sort"><i class="glyphicon"></i></div>'),b.lockWidth||e.push('<div class="mmg-colResize"></div>'),e.push("</div></th>")}return e.join("")},_initHead:function(){var b=this,c=this.opts,d=this.$head;if(c.cols){for(var e=["<thead>"],f=b._titleDeep(c.cols),g=1;f>=g;g++){var h=b._colsWithTitleDeep(c.cols,g);e.push("<tr>");for(var i=0;i<h.length;i++){var j=h[i];e.push(this._titleHtml(j,f-g+1))}e.push("</tr>")}e.push("</thead>"),d.html(e.join(""))}var k=this._expandThs(),l=this._expandCols(c.cols);a.each(k,function(b){l[b].width||(l[b].width=100),a.data(this,"col-width",l[b].width),a.data(this,"col",l[b])});var m=this.$mmGrid,n=this.$headWrapper,o=this.$bodyWrapper;if("auto"!==c.height&&o.height(m.height()-n.outerHeight(!0)),c.sortName)for(var i=0;i<l.length;i++){var j=l[i];if(j.sortName===c.sortName||j.name===c.sortName){var p=k.eq(i);a.data(p.find(".mmg-title")[0],"sortStatus",c.sortStatus),p.find(".mmg-sort").addClass("mmg-"+c.sortStatus)}}},_initOptions:function(){var a=(this.opts,this.$mmGrid),b=this.$headWrapper,c=this.$backboard;a.find("a.mmg-btnBackboardDn").css({top:b.outerHeight(!0)}).slideUp("fast");var d=this._leafCols();if(d){for(var e='<div class="hidden-cols"><h1>显示列</h1>',f='<div class="frozen-cols"><h1>冻结列</h1>',g=0;g<d.length;g++){e+="<label",f+="<label",(d[g].checkCol||d[g].indexCol)&&(e+=' style="display:none;" ',f+=' style="display:none;" ');var h=d[g];e+='><input type="checkbox"',f+='><input type="checkbox"',h.hidden||(e+=' checked="checked"'),h.frozen&&(f+=' checked="checked"'),h.lockDisplay&&(e+=' disabled="disabled"'),e+="/><span>",f+="/><span>",h.title?(e+=h.title,f+=h.title):(e+="未命名",f+="未命名"),e+="</span></label>",f+="</span></label>"}c.append(e+"</div>"),this.opts.freezable&&c.append(f+"</div>")}},_initEvents:function(){var b=this,d=this.opts,e=this.$mmGrid,f=this.$headWrapper,g=this.$head,h=this.$bodyWrapper,i=this.$body,j=this.$backboard,k=this._expandThs(),l=(this._expandCols(d.cols),this._leafCols());("auto"===d.width||"auto"===d.height||"string"==typeof d.width&&d.width.indexOf("%")===d.width.length-1||"string"==typeof d.height&&d.height.indexOf("%")===d.height.length-1)&&a(window).on("resize",function(){b.resize()}),h.on("scroll",function(){g.css("left",-a(this).scrollLeft())});var m=e.find("a.mmg-btnBackboardDn").on("click",function(){var a=e.height()-f.outerHeight(!0);"auto"===d.height&&"auto"!==d.backboardMinHeight&&a<d.backboardMinHeight&&(a=d.backboardMinHeight),j.height(a),"auto"===d.height&&e.height(f.outerHeight(!0)+j.outerHeight(!0)),j.slideDown(),m.slideUp("fast"),b._hideMessage()});i.on("mouseenter",function(){m.slideUp("fast")}),e.on("mouseleave",function(){m.slideUp("fast")}),f.on("mouseenter",function(){j.is(":hidden")&&d.showBackboard&&m.slideDown("fast")}),e.find("a.mmg-btnBackboardUp").on("click",function(){j.slideUp().queue(function(a){(!b.rowsLength()||1===b.rowsLength()&&1===i.find("tr.emptyRow").length)&&b._showNoData(),"auto"===d.height&&e.height("auto"),a()})}),j.on("click",".hidden-cols :checkbox",function(){var c=j.find(".hidden-cols label").index(a(this).parent()),i=1;if(d.checkCol&&(i+=1),d.indexCol&&(i+=1),j.find(".hidden-cols label :checked").length<i)return void(this.checked=!0);var k=l[c];this.checked?(k.hidden=!1,j.find(".frozen-cols label > :checkbox:eq("+c+")").prop("disabled",!1)):(k.hidden=!0,k.frozen=!1,j.find(".frozen-cols label > :checkbox:eq("+c+")").prop("checked",!1).prop("disabled",!0));for(var m=g.find("th"),n=m.length-1;n>=0;n--){var o=m.eq(n),p=o.data("col");if(p.cols){var q=!0,r=0;a.each(p.cols,function(a,b){b.hidden||(q=!1,r++)}),0!==r&&o.prop("colspan",r),p.hidden=q}}b._setColsWidth(),b._frozenColumns(),j.height(e.height()-f.outerHeight(!0)),"auto"!==d.height&&h.height(e.height()-f.outerHeight(!0)),e.find("a.mmg-btnBackboardDn").css({top:f.outerHeight(!0)})}),j.on("click",".frozen-cols :checkbox",function(){var c=j.find(".frozen-cols label").index(a(this).parent()),g=l[c];g.width;this.checked?(g.hidden=!0,g.frozen=!0):(g.hidden=!1,g.frozen=!1);var i=b._calcFrozenProps();return i?!1:(b._setColsWidth(),j.height(e.height()-f.outerHeight(!0)),"auto"!==d.height&&h.height(e.height()-f.outerHeight(!0)),e.find("a.mmg-btnBackboardDn").css({top:f.outerHeight(!0)}),void b._frozenColumns())}),g.on("click",".mmg-title",function(){var c=a(this),f=k.find(".mmg-title"),g=c.parent().parent().data("col");if(g.sortable){var h="asc"===a.data(this,"sortStatus")?"desc":"asc";a.each(f,function(){a.removeData(this,"sortStatus")}),k.find(".mmg-sort").removeClass("mmg-asc").removeClass("mmg-desc"),k.find(".mmg-sort i").removeClass("glyphicon-chevron-up").removeClass("glyphicon-chevron-down"),e.find(".mmg-frozen-head-th .glyphicon").removeClass("glyphicon-chevron-up").removeClass("glyphicon-chevron-down"),a.data(this,"sortStatus",h),"desc"===h?c.siblings(".mmg-sort").find("i").addClass("glyphicon-chevron-up"):c.siblings(".mmg-sort").find("i").addClass("glyphicon-chevron-down"),c.siblings(".mmg-sort").addClass("mmg-"+h),d.url&&d.remoteSort?b.load():(b._nativeSorter(a.inArray(g,l),h),b._setStyle())}}).on("mousedown",".mmg-colResize",function(c){var d=a(this),h=c.pageX,i=e.find(".mmg-colResizePointer").css("left",c.pageX-f.offset().left).show(),j=g.position().left,k=e.find(".mmg-colResizePointer-before").css("left",d.parent().parent().position().left+j).show();document.selection&&document.selection.empty&&(document.selection.empty(),1)||window.getSelection&&window.getSelection().removeAllRanges(),document.body.onselectstart=function(){return!1},f.css("-moz-user-select","none"),e.on("mousemove",function(a){i.css("left",a.pageX-f.offset().left)}).on("mouseup",function(c){var e=d.parent().parent(),g=e.width()+c.pageX-h;a.data(e[0],"col-width",g),b._setColsWidth(),f.mouseleave()}).on("mouseleave",function(){e.off("mouseup").off("mouseleave").off("mousemove"),i.hide(),k.hide(),document.body.onselectstart=function(){return!0},f.css("-moz-user-select","text")})});var i=this.$body;i.on("click","td",function(c){var d=a(this),e=jQuery.Event("cellSelected");e.target=c.target,b.$body.triggerHandler(e,[a.data(d.parent()[0],"item"),d.parent().index(),d.index()]),e.isPropagationStopped()||(d.parent().hasClass("selected")?b.deselect(d.parent().index()):b.select(d.parent().index()))}),i.on("click","tr > td .mmg-check",function(c){c.stopPropagation();var d=a(this);this.checked?b.select(a(d.parents("tr")[0]).index()):b.deselect(a(d.parents("tr")[0]).index())}),d.checkCol&&g.find("th .checkAll").on("click",function(){this.checked?b.select("all"):b.deselect("all")}),c.isIE6&&i.on("mouseenter","tr",function(){a(this).toggleClass("hover")}).on("mouseleave","tr",function(){a(this).toggleClass("hover")}),i.on("loadSuccess",function(a){b._frozenColumns()}),i.on("cellSelected",function(c,d,e,f){for(var g=b.$mmGrid.find(".mmg-frozen .row-"+e),h=0;h<g.length;h++){var i=a(g[h]);if(b.opts.multiSelect)i.hasClass("selected")?(i.removeClass("selected"),i.find(":checkbox").prop("checked",!1)):(i.addClass("selected"),i.find(":checkbox").prop("checked",!0));else{var j=i.hasClass("selected");i.parent().find("tr.selected").removeClass("selected"),j||(i.addClass("selected"),i.find(":checkbox").prop("checked",!0))}}})},_rowHtml:function(b,c){var d=this.opts,e=this._expandCols(d.cols),f=this._leafCols();if(a.isPlainObject(b)){var g=[];g.push("<tr>");for(var h=0;h<f.length;h++){var i=f[h];g.push('<td class="');var j=a.inArray(i,e);g.push(this._genColClass(j)),d.nowrap&&g.push(" nowrap"),g.push('"><span class="'),d.nowrap&&g.push("nowrap"),g.push('">'),i.renderer?g.push(i.renderer(b[i.name],b,c)):g.push(b[i.name]),g.push("</span></td>")}return g.push("</tr>"),g.join("")}},_populate:function(b){var c=this.opts,d=this.$body;if(this._hideMessage(),b&&0!==b.length&&c.cols){var e=[];e.push("<tbody>");for(var f=0;f<b.length;f++){var g=b[f];e.push(this._rowHtml(g,f))}e.push("</tbody>"),d.empty().html(e.join(""));for(var h=d.find("tr"),f=0;f<b.length;f++)a.data(h.eq(f)[0],"item",b[f])}else this._insertEmptyRow(),this._showNoData();this._setStyle(),c.fullWidthRows&&this._loadCount<=1&&this._fullWidthRows()},_insertEmptyRow:function(){var a=this.$body;a.empty().html('<tbody><tr class="emptyRow"><td  style="border: 0px;background: none;">&nbsp;</td></tr></tbody>')},_removeEmptyRow:function(){var a=this.$body;a.find("tr.emptyRow").remove()},_genColClass:function(a){return"mmg"+this._id+"-col"+a},_setStyle:function(){var b=this.$head,c=this._expandThs(),d=this.$body,e=this._leafCols();c.eq(0).addClass("first"),c.eq(-1).addClass("last"),d.find("tr,td").removeClass("even").removeClass("colSelected").removeClass("colSelectedEven"),d.find("tr:odd").addClass("even");var f=a.inArray(b.find(".mmg-title").filter(function(){return"asc"===a.data(this,"sortStatus")||"desc"===a(this).data("sortStatus")}).parent().parent().data("col"),e);d.find("tr > td:nth-child("+(f+1)+")").addClass("colSelected").filter(":odd").addClass("colSelectedEven"),this._resizeHeight()},_setColsWidth:function(){this._calcFrozenProps();var b=this.opts,c=this.$style,d=this.$head,e=this.$bodyWrapper,f=this.$body,g=this._expandThs(),h=this._expandCols(b.cols),i=e.scrollTop(),j=d.position().left;e.width(9999),f.width("auto");for(var k=[],l=0;l<g.length;l++){var m=g.eq(l);k.push(".mmGrid ."+this._genColClass(l)+" {");var n=a.data(m[0],"col-width");k.push("width: "+n+"px;"),k.push("max-width: "+n+"px;");var o=h[l];o.align&&k.push("text-align: "+o.align+";"),o.hidden&&k.push("display: none; "),k.push(" }")}f.detach();try{c.text(k.join(""))}catch(p){c[0].styleSheet.cssText=k.join("")}f.width(d.width()),e.width("100%"),e.append(f),e.scrollLeft(-j),0===e.scrollLeft()&&d.css("left",0),e.scrollTop(i)},_fullWidthRows:function(){var b=(this.opts,this.$bodyWrapper),d=this.$mmGrid,e=this.$head,f=b.width()-b[0].clientWidth;f&&c.isIE&&(f+=1);var g=d.width()-e.width()-f;if(!(-20>g)){for(var h=[],i=this._leafThs(),j=this._leafCols(),k=0;k<j.length;k++){var l=j[k],m=i.eq(k);!l.lockWidth&&m.is(":visible")&&h.push(m)}for(var n=Math.floor(g/h.length),o=0,k=0;k<h.length;k++){var m=h[k],p=a.data(m[0],"col-width")+n;a.data(m[0],"col-width",p);var q=a.data(h[o][0],"col-width");p>q&&(o=k)}var r=g-n*h.length,q=a.data(h[o][0],"col-width");a.data(h[o][0],"col-width",q+r),this._setColsWidth()}},_showLoading:function(){var a=this.$mmGrid;a.find(".mmg-mask").show();var b=a.find(".mmg-loading");b.css({left:(a.width()-b.width())/2,top:(a.height()-b.height())/2}).show()},_hideLoading:function(){var a=this.$mmGrid;a.find(".mmg-mask").hide(),a.find(".mmg-loading").hide()},_showNoData:function(){this._showMessage(this.opts.noDataText)},_showLoadError:function(){this._showMessage(this.opts.loadErrorText)},_showMessage:function(a){var b=this.$mmGrid,c=this.$headWrapper,d=b.find(".mmg-message");d.css({left:(b.width()-d.width())/2,top:(b.height()+c.height()-d.height())/2}).text(a).show()},_hideMessage:function(){var a=this.$mmGrid;a.find(".mmg-message").hide()},_nativeSorter:function(b,c){var d=this._leafCols(),e=d[b];this.$body.find("tr > td:nth-child("+(b+1)+")").sortElements(function(b,d){var f=a.text(a(b)),g=a.text(a(d));return"number"!==e.type?"desc"===c?-f.localeCompare(g):f.localeCompare(g):(f=parseFloat(f),g=parseFloat(g),f>g?"desc"===c?-1:1:"desc"===c?1:-1)},function(){return this.parentNode})},_refreshSortStatus:function(){var b=this.$head.find("th"),c=-1,d="";b.find(".mmg-title").each(function(b,e){var f=a.data(e,"sortStatus");f&&(c=b,d=f)});var d="desc"===d?"asc":"desc";c>=0&&b.eq(c).find(".mmg-title").data("sortStatus",d).click()},_loadAjax:function(b){var c=this,d=this.opts,e={};if(a.isFunction(d.params)){var f=d.params();if(!f)return;e=a.extend(e,f)}else a.isPlainObject(d.params)&&(e=a.extend(e,d.params));if(d.remoteSort){for(var g="",h="",i=this.$head.find(".mmg-title"),j=0;j<i.length;j++){var k=a.data(i[j],"sortStatus");if(k){var l=i.eq(j).parent().parent().data("col");g=l.sortName?l.sortName:l.name,h=k}}g&&(d.sort?e=d.sort(e,g,h):e.sort=g+"."+h)}for(var m={},n=0;n<this.opts.plugins.length;n++){var o=this.opts.plugins[n];a.extend(m,o.params())}e=a.extend(e,m),e=a.extend(e,b),c._showLoading(),a.ajax({type:d.method,url:d.url,data:e,dataType:"json",cache:d.cache}).done(function(e){a.isFunction(d.transform)&&(e=d.transform(e));try{var f=e;a.isArray(e[d.root])&&(f=e[d.root]),c._populate(f),c._hideLoading(),d.remoteSort||c._refreshSortStatus(),e&&a.isArray(e[d.root])&&(e=a.extend(b,e)),c.$body.triggerHandler("loadSuccess",e)}catch(g){throw c._hideLoading(),c._showLoadError(),g}}).fail(function(a){c._hideLoading(),c._showLoadError(),c.$body.triggerHandler("loadError",a)})},_loadNative:function(a){this._populate(a),this._refreshSortStatus(),this.$body.triggerHandler("loadSuccess",a)},load:function(b){try{var c=this.opts;this._hideMessage(),this._loadCount=this._loadCount+1,a.isArray(b)?this._loadNative(b):c.url?this._loadAjax(b):c.items?this._loadNative(c.items):this._loadNative([])}catch(d){throw this._showLoadError(),d}},resize:function(){var a=this.opts,b=this.$mmGrid,d=this.$headWrapper,e=this.$bodyWrapper;!c.isIE6||a.width&&"auto"!==a.width?b.width(a.width):(b.width("100%"),b.width(b.width()-(b.outerWidth(!0)-b.width()))),"auto"!==a.height&&(!c.isIE6||a.height&&"auto"!==a.height?b.height(a.height):(b.height("100%"),b.height(b.height()-(b.outerHeight(!0)-b.height()))),e.height(b.height()-d.outerHeight(!0)));var f=b.find(".mmg-message");f.is(":visible")&&f.css({left:(b.width()-f.width())/2,top:(b.height()+d.height()-f.height())/2});var g=b.find(".mmg-mask");if(g.is(":visible")){g.width(b.width()).height(b.height());var h=b.find(".mmg-loading");h.css({left:(b.width()-h.width())/2,top:(b.height()-h.height())/2})}e.trigger("scroll"),this._resizeHeight()},_resizeHeight:function(){var a=this.opts,b=this.$bodyWrapper,d=this.$body;"auto"===a.height&&c.isIE7&&(b.height("auto"),b.width()<d.width()&&b.height(b.height()+b.height()-b[0].clientHeight+1))},select:function(b){var c=this.opts,d=this.$body,e=this.$head;if("number"==typeof b){var f=d.find("tr").eq(b);c.multiSelect||(d.find("tr.selected").removeClass("selected"),c.checkCol&&d.find("tr > td").find(".mmg-check").prop("checked","")),f.hasClass("selected")||(f.addClass("selected"),c.checkCol&&f.find("td .mmg-check").prop("checked","checked"))}else if("function"==typeof b)a.each(d.find("tr"),function(d){if(b(a.data(this,"item"),d)){var e=a(this);e.hasClass("selected")||(e.addClass("selected"),c.checkCol&&e.find("td .mmg-check").prop("checked","checked"))}});else{if(void 0!==b&&("string"!=typeof b||"all"!==b))return;d.find("tr.selected").removeClass("selected"),d.find("tr").addClass("selected"),d.find("tr > td").find(".mmg-check").prop("checked","checked")}if(c.checkCol){var g=d.find("tr > td").find(".mmg-check");g.length===g.filter(":checked").length&&(e.find("th .checkAll").prop("checked","checked"),this.$mmGrid.find(".mmg-frozen-check .checkAll").prop("checked","checked"))}},deselect:function(b){var c=this.opts,d=this.$body,e=this.$head;if("number"==typeof b)d.find("tr").eq(b).removeClass("selected"),c.checkCol&&d.find("tr").eq(b).find("td .mmg-check").prop("checked","");else if("function"==typeof b)a.each(d.find("tr"),function(d){b(a.data(this,"item"),d)&&(a(this).removeClass("selected"),c.checkCol&&a(this).find("td .mmg-check").prop("checked",""))});else{if(void 0!==b&&("string"!=typeof b||"all"!==b))return;d.find("tr.selected").removeClass("selected"),c.checkCol&&d.find("tr > td").find(".mmg-check").prop("checked","")}e.find("th .checkAll").prop("checked",""),this.$mmGrid.find(".mmg-frozen-check .checkAll").prop("checked","")},selectedRows:function(){var b=this.$body,c=[];return a.each(b.find("tr.selected"),function(b,d){c.push(a.data(this,"item"))}),c},selectedRowsIndex:function(){var b=this.$body,c=this.$body.find("tr"),d=[];return a.each(b.find("tr.selected"),function(a){d.push(c.index(this))}),d},rows:function(){var b=this.$body,c=[];return a.each(b.find("tr"),function(){c.push(a.data(this,"item"))}),c},row:function(b){var c=this.$body;if(void 0!==b&&b>=0){var d=c.find("tr").eq(b);if(0!==d.length)return a.data(d[0],"item")}},rowsLength:function(){var a=this.$body,b=a.find("tr").length;return 1===b&&1===a.find("tr.emptyRow").length?0:b},addRow:function(b,c){var d=this.$body.find("tbody");if(a.isArray(b))for(var e=b.length-1;e>=0;e--)this.addRow(b[e],c);else if(a.isPlainObject(b)){this._hideMessage(),this._removeEmptyRow();var f;if(void 0===c||0>c)f=a(this._rowHtml(b,this.rowsLength())),d.append(f);else if(f=a(this._rowHtml(b,c)),0===c)d.prepend(f);else{var g=d.find("tr").eq(c-1);0===g.length?d.append(f):g.after(a(f))}f.data("item",b),this._setStyle(),this.$body.triggerHandler("rowInserted",[b,c])}},updateRow:function(b,c){var d=this.opts,e=this.$body.find("tbody");if(a.isPlainObject(b)){var f=this.row(c),g=e.find("tr").eq(c),h=g.find("td:first :checkbox").is(":checked");g.html(this._rowHtml(b,c).slice(4,-5)),d.checkCol&&g.find("td:first :checkbox").prop("checked",h),g.data("item",b),this._setStyle(),this.$body.triggerHandler("rowUpdated",[f,b,c])}},removeRow:function(b){var c=this,d=c.$body.find("tbody");if(a.isArray(b))for(var e=b.length-1;e>=0;e--)c.removeRow(b[e]);else{if(void 0===b)for(var f=d.find("tr"),e=f.length-1;e>=0;e--)c.removeRow(e);else{var g=c.row(b);d.find("tr").eq(b).remove(),this.$body.triggerHandler("rowRemoved",[g,b])}this._setStyle(),0===this.rowsLength()&&(this._showNoData(),this._insertEmptyRow())}},_buildFrozenColumn:function(a,b){for(var c="<tbody>",d=0;d<b.length;d++)c+='<tr class="row-'+d+(b[d].isSelected?" selected":"")+'"><td class="col-'+a.index+'">',c+=a.checkCol?'<input type="checkbox" class="mmg-check"'+(b[d].isSelected?" checked":"")+">":a.indexCol?'<label class="mmg-index">'+b[d].text+"</label>":"<span>"+b[d].text+"</span>",c+="</td></tr>";return c+="</tbody>"},_calcFrozenProps:function(){for(var a=this.$body.parent().width()-200,b=!1,c=0,d=this._leafCols(),e=!1,f=0;f<d.length;f++){var g=d[f];!g.frozen||g.indexCol||g.checkCol?(g.indexCol||g.checkCol)&&(c+=g.width):c>a?(b=!0,g.hidden=!1,g.frozen=!1):(g.hidden=!0,e=!0,c+=g.width)}return e?this.opts.indexCol&&this.opts.checkCol?(d[0].hidden=!0,d[0].frozen=!0,d[1].hidden=!0,d[1].frozen=!0):(this.opts.indexCol||this.opts.checkCol)&&(d[0].hidden=!0,d[0].frozen=!0):this.opts.indexCol&&this.opts.checkCol?(d[0].hidden=!1,d[0].frozen=!1,d[1].hidden=!1,d[1].frozen=!1):(this.opts.indexCol||this.opts.checkCol)&&(d[0].hidden=!1,d[0].frozen=!1),b},_bindFrozenEvents:function(b,c){var d=this;b.find(".col-"+c).on("click",function(b){$el=a(b.currentTarget);var c=$el.attr("class").split("-")[1],e=$el.parent().attr("class").split(" ")[0].split("-")[1];d.$body.find("tr:eq("+e+") td:eq("+c+")").trigger("click")})},_frozenColumns:function(){if(this.opts.freezable){for(var b=this,c=this._leafCols(),d=0,e=0;e<c.length;e++){var f=c[e];f.index=e;var g=f.name;if(f.indexCol&&(g="index"),f.checkCol&&(g="check"),f.frozen){for(var h=[],i=b.$body.find("tr"),j=0;j<i.length;j++){var k=a(i[j]).find("td:eq("+e+")"),l=!1;k.parent().hasClass("selected")&&(l=!0),h.push({text:k.text(),isSelected:l})}var m=b.$mmGrid.find(".mmg-frozen-"+g);m&&m.length>0?(m.find(".mmg-frozen-body").empty().append(b._buildFrozenColumn(f,h)),m.css("marginLeft",d),d+=f.width,this._bindFrozenEvents(m,e)):(m=a('<div class="mmg-frozen-'+g+' mmg-frozen mmg-bodyWrapper" style="width: '+(f.width+1)+'px;">  <table class="mmg-frozen-head" style="width: '+f.width+'px;">    <thead>      <tr>        <th class="mmg-frozen-head-th'+(f.sortable?" mmg-canSort":"")+'"'+(f.checkCol?' style="padding: 8px 0;"':"")+'          data-index="'+e+'">'+f.title+'<i class="glyphicon"></i></th>      </tr>    </thead>  </table>  <div class="mmg-frozen-bodyWrapper">    <table class="mmg-frozen-body mmg-body table-responsive">    </table>  </div></div>'),m.find(".mmg-frozen-body").append(this._buildFrozenColumn(f,h)),this.$backboard.before(m),m.css("marginLeft",d),d+=f.width,this.$bodyWrapper.on("scroll.frozen."+g,function(c){b.$mmGrid.find(".mmg-frozen-bodyWrapper").scrollTop(a(c.target).scrollTop())}),m.find(".checkAll").on("click",function(a){b.$head.find(".checkAll").trigger("click"),a.target.checked?(b.$mmGrid.find(".mmg-frozen tr").addClass("selected"),b.$mmGrid.find(".mmg-frozen tr :checkbox").prop("checked",!0)):(b.$mmGrid.find(".mmg-frozen tr").removeClass("selected"),b.$mmGrid.find(".mmg-frozen tr :checkbox").prop("checked",!1))}),m.find(".mmg-canSort").on("click",function(c){var d=a(c.currentTarget),e=b.$head.find(".mmg-title:eq("+d.data("index")+")");e.trigger("click"),"asc"==e.data("sortStatus")?d.find(".glyphicon").removeClass("glyphicon-chevron-up").addClass("glyphicon-chevron-down"):"desc"==e.data("sortStatus")&&d.find(".glyphicon").removeClass("glyphicon-chevron-down").addClass("glyphicon-chevron-up")}),this._bindFrozenEvents(m,e))}else{var m=this.$mmGrid.find(".mmg-frozen-"+g);m&&m.length>0&&m.remove()}}this.$head.css("marginLeft",d),this.$body.css("marginLeft",d);var n=this.$body.parent().height();this.$body.parent().width()<this.$body.width()+parseFloat(this.$body.css("marginLeft").replace("px",""))&&(n-=16),this.$mmGrid.find(".mmg-frozen-bodyWrapper").height(n)}}},a.fn.table=function(){if(0!==this.length){if(0===arguments.length||"object"==typeof arguments[0]){var c=arguments[0],d=this.data("mmGrid"),e=a.extend(!0,{},a.fn.table.defaults,c);return d||(d=new b(this,e),this.data("mmGrid",d)),a.extend(!0,this,d)}if("string"==typeof arguments[0]){var d=this.data("mmGrid"),f=d[arguments[0]];if(f){var g=Array.prototype.slice.call(arguments);return f.apply(d,g.slice(1))}}}},a.fn.table.defaults={width:"auto",height:"280px",cols:[],url:!1,params:{},method:"POST",cache:!1,root:"items",items:[],autoLoad:!0,remoteSort:!1,sortName:"",sortStatus:"asc",loadingText:getLoading(),noDataText:"没有数据",loadErrorText:"数据加载出现异常",multiSelect:!1,checkCol:!1,indexCol:!1,indexColWidth:30,fullWidthRows:!1,nowrap:!1,showBackboard:!0,backboardMinHeight:125,freezable:!0,plugins:[]},a.fn.table.Constructor=b,a.fn.sortElements=function(){var a=[].sort;return function(b,c){c=c||function(){return this};var d=this.map(function(){var a=c.call(this),b=a.parentNode,d=b.insertBefore(document.createTextNode(""),a.nextSibling);return function(){if(b===this)throw new Error("You can't sort elements if any one is a descendant of another.");b.insertBefore(this,d),b.removeChild(d)}});return a.call(this,b).each(function(a){d[a].call(c.call(this))})}}()}(window.jQuery),+function(a,b){"use strict";a.BootstrapDialog=b(a.jQuery)}(window,function(a){"use strict";var b=a.fn.modal.Constructor,c=function(a,c){b.call(this,a,c)};c.getModalVersion=function(){var b=null;return b="undefined"==typeof a.fn.modal.Constructor.VERSION?"v3.1":/3\.2\.\d+/.test(a.fn.modal.Constructor.VERSION)?"v3.2":/3\.3\.[1,2]/.test(a.fn.modal.Constructor.VERSION)?"v3.3":"v3.3.4"},c.ORIGINAL_BODY_PADDING=parseInt(a("body").css("padding-right")||0,10),c.METHODS_TO_OVERRIDE={},c.METHODS_TO_OVERRIDE["v3.1"]={},c.METHODS_TO_OVERRIDE["v3.2"]={hide:function(b){if(b&&b.preventDefault(),b=a.Event("hide.bs.modal"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()){this.isShown=!1;var c=this.getGlobalOpenedDialogs();0===c.length&&this.$body.removeClass("modal-open"),this.resetScrollbar(),this.escape(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",a.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal()}}},c.METHODS_TO_OVERRIDE["v3.3"]={setScrollbar:function(){var a=c.ORIGINAL_BODY_PADDING;this.bodyIsOverflowing&&this.$body.css("padding-right",a+this.scrollbarWidth)},resetScrollbar:function(){var a=this.getGlobalOpenedDialogs();0===a.length&&this.$body.css("padding-right",c.ORIGINAL_BODY_PADDING)},hideModal:function(){this.$element.hide(),this.backdrop(a.proxy(function(){var a=this.getGlobalOpenedDialogs();0===a.length&&this.$body.removeClass("modal-open"),this.resetAdjustments(),this.resetScrollbar(),this.$element.trigger("hidden.bs.modal")},this))}},c.METHODS_TO_OVERRIDE["v3.3.4"]=a.extend({},c.METHODS_TO_OVERRIDE["v3.3"]),c.prototype={constructor:c,getGlobalOpenedDialogs:function(){var b=[];return a.each(d.dialogs,function(a,c){c.isRealized()&&c.isOpened()&&b.push(c)}),b}},c.prototype=a.extend(c.prototype,b.prototype,c.METHODS_TO_OVERRIDE[c.getModalVersion()]);var d=function(b){this.defaultOptions=a.extend(!0,{id:d.newGuid(),buttons:[],data:{},onshow:null,onshown:null,onhide:null,onhidden:null},d.defaultOptions),this.indexedButtons={},this.registeredButtonHotkeys={},this.draggableData={isMouseDown:!1,mouseOffset:{}},this.realized=!1,this.opened=!1,this.initOptions(b),this.holdThisInstance()};return d.BootstrapDialogModal=c,d.NAMESPACE="bootstrap-dialog",d.TYPE_DEFAULT="type-default",d.TYPE_INFO="type-info",d.TYPE_PRIMARY="type-primary",d.TYPE_SUCCESS="type-success",d.TYPE_WARNING="type-warning",d.TYPE_DANGER="type-danger",d.DEFAULT_TEXTS={},d.DEFAULT_TEXTS[d.TYPE_DEFAULT]="提示",d.DEFAULT_TEXTS[d.TYPE_INFO]="提示",d.DEFAULT_TEXTS[d.TYPE_PRIMARY]="提示",d.DEFAULT_TEXTS[d.TYPE_SUCCESS]="成功",d.DEFAULT_TEXTS[d.TYPE_WARNING]="警告",d.DEFAULT_TEXTS[d.TYPE_DANGER]="错误",d.DEFAULT_TEXTS.OK="确定",d.DEFAULT_TEXTS.CANCEL="取消",d.DEFAULT_TEXTS.CONFIRM="确认",d.SIZE_NORMAL="size-normal",d.SIZE_SMALL="size-small",d.SIZE_WIDE="size-wide",d.SIZE_LARGE="size-large",d.BUTTON_SIZES={},d.BUTTON_SIZES[d.SIZE_NORMAL]="",d.BUTTON_SIZES[d.SIZE_SMALL]="",d.BUTTON_SIZES[d.SIZE_WIDE]="",d.BUTTON_SIZES[d.SIZE_LARGE]="btn-lg",d.ICON_SPINNER="glyphicon glyphicon-asterisk",d.defaultOptions={type:d.TYPE_PRIMARY,size:d.SIZE_NORMAL,cssClass:"",title:null,message:null,nl2br:!0,closable:!0,closeByBackdrop:!0,closeByKeyboard:!0,closeIcon:"&#215;",spinicon:d.ICON_SPINNER,autodestroy:!0,draggable:!1,animate:!0,description:"",tabindex:-1},d.configDefaultOptions=function(b){d.defaultOptions=a.extend(!0,d.defaultOptions,b)},d.dialogs={},d.openAll=function(){a.each(d.dialogs,function(a,b){b.open()})},d.closeAll=function(){a.each(d.dialogs,function(a,b){b.close()})},d.getDialog=function(a){var b=null;return"undefined"!=typeof d.dialogs[a]&&(b=d.dialogs[a]),b},d.setDialog=function(a){return d.dialogs[a.getId()]=a,a},d.addDialog=function(a){return d.setDialog(a)},d.moveFocus=function(){var b=null;a.each(d.dialogs,function(a,c){c.isRealized()&&c.isOpened()&&(b=c)}),null!==b&&b.getModal().focus()},d.METHODS_TO_OVERRIDE={},d.METHODS_TO_OVERRIDE["v3.1"]={handleModalBackdropEvent:function(){return this.getModal().on("click",{dialog:this},function(a){a.target===this&&a.data.dialog.isClosable()&&a.data.dialog.canCloseByBackdrop()&&a.data.dialog.close()}),this},updateZIndex:function(){if(this.isOpened()){var b=1040,c=1050,e=0;a.each(d.dialogs,function(a,b){b.isRealized()&&b.isOpened()&&e++});var f=this.getModal(),g=f.data("bs.modal").$backdrop;f.css("z-index",c+20*(e-1)),g.css("z-index",b+20*(e-1))}if("hidden"===this.options.backdrop){var f=this.getModal(),g=f.data("bs.modal").$backdrop;g.hide()}return this},open:function(){return!this.isRealized()&&this.realize(),this.getModal().modal("show"),this.updateZIndex(),this.options.closeByBackdrop||this.$modal.css("pointer-events","none"),this}},d.METHODS_TO_OVERRIDE["v3.2"]={handleModalBackdropEvent:d.METHODS_TO_OVERRIDE["v3.1"].handleModalBackdropEvent,updateZIndex:d.METHODS_TO_OVERRIDE["v3.1"].updateZIndex,open:d.METHODS_TO_OVERRIDE["v3.1"].open},d.METHODS_TO_OVERRIDE["v3.3"]={},d.METHODS_TO_OVERRIDE["v3.3.4"]=a.extend({},d.METHODS_TO_OVERRIDE["v3.1"]),d.prototype={constructor:d,initOptions:function(b){return this.options=a.extend(!0,this.defaultOptions,b),this},holdThisInstance:function(){return d.addDialog(this),this},initModalStuff:function(){return this.setModal(this.createModal()).setModalDialog(this.createModalDialog()).setModalContent(this.createModalContent()).setModalHeader(this.createModalHeader()).setModalBody(this.createModalBody()).setModalFooter(this.createModalFooter()),this.getModal().append(this.getModalDialog()),this.getModalDialog().append(this.getModalContent()),this.getModalContent().append(this.getModalHeader()).append(this.getModalBody()).append(this.getModalFooter()),this},createModal:function(){var b=a('<div class="modal" role="dialog" aria-hidden="true"></div>');return b.prop("id",this.getId()),b.attr("aria-labelledby",this.getId()+"_title"),b},getModal:function(){return this.$modal},setModal:function(a){return this.$modal=a,this},createModalDialog:function(){return a('<div class="modal-dialog"></div>')},getModalDialog:function(){return this.$modalDialog},setModalDialog:function(a){return this.$modalDialog=a,this},createModalContent:function(){return a('<div class="modal-content"></div>')},getModalContent:function(){return this.$modalContent},setModalContent:function(a){return this.$modalContent=a,this},createModalHeader:function(){return a('<div class="modal-header"></div>')},getModalHeader:function(){return this.$modalHeader},setModalHeader:function(a){return this.$modalHeader=a,this},createModalBody:function(){return a('<div class="modal-body"></div>')},getModalBody:function(){return this.$modalBody},setModalBody:function(a){return this.$modalBody=a,this},createModalFooter:function(){return a('<div class="modal-footer"></div>')},getModalFooter:function(){return this.$modalFooter},setModalFooter:function(a){return this.$modalFooter=a,this},createDynamicContent:function(a){var b=null;return b="function"==typeof a?a.call(a,this):a,"string"==typeof b&&(b=this.formatStringContent(b)),b},formatStringContent:function(a){return this.options.nl2br?a.replace(/\r\n/g,"<br />").replace(/[\r\n]/g,"<br />"):a},setData:function(a,b){return this.options.data[a]=b,this},getData:function(a){return this.options.data[a]},setId:function(a){return this.options.id=a,this},getId:function(){return this.options.id},getType:function(){return this.options.type},setType:function(a){return this.options.type=a,this.updateType(),this},updateType:function(){if(this.isRealized()){var a=[d.TYPE_DEFAULT,d.TYPE_INFO,d.TYPE_PRIMARY,d.TYPE_SUCCESS,d.TYPE_WARNING,d.TYPE_DANGER];this.getModal().removeClass(a.join(" ")).addClass(this.getType())}return this},getSize:function(){return this.options.size},setSize:function(a){return this.options.size=a,this.updateSize(),this},updateSize:function(){if(this.isRealized()){var b=this;this.getModal().removeClass(d.SIZE_NORMAL).removeClass(d.SIZE_SMALL).removeClass(d.SIZE_WIDE).removeClass(d.SIZE_LARGE),this.getModal().addClass(this.getSize()),this.getModalDialog().removeClass("modal-sm"),this.getSize()===d.SIZE_SMALL&&this.getModalDialog().addClass("modal-sm"),this.getModalDialog().removeClass("modal-lg"),this.getSize()===d.SIZE_WIDE&&this.getModalDialog().addClass("modal-lg"),a.each(this.options.buttons,function(c,d){var e=b.getButton(d.id),f=["btn-lg","btn-sm","btn-xs"],g=!1;if("string"==typeof d.cssClass){var h=d.cssClass.split(" ");a.each(h,function(b,c){-1!==a.inArray(c,f)&&(g=!0)})}g||(e.removeClass(f.join(" ")),e.addClass(b.getButtonSize()))})}return this},getCssClass:function(){return this.options.cssClass},setCssClass:function(a){return this.options.cssClass=a,this},getTitle:function(){return this.options.title},setTitle:function(a){return this.options.title=a,this.updateTitle(),this},updateTitle:function(){if(this.isRealized()){var a=null!==this.getTitle()?this.createDynamicContent(this.getTitle()):this.getDefaultText();this.getModalHeader().find("."+this.getNamespace("title")).html("").append(a).prop("id",this.getId()+"_title")}return this},getMessage:function(){return this.options.message},setMessage:function(a){return this.options.message=a,this.updateMessage(),this},updateMessage:function(){if(this.isRealized()){var a=this.createDynamicContent(this.getMessage());
this.getModalBody().find("."+this.getNamespace("message")).html("").append(a)}return this},isClosable:function(){return this.options.closable},setClosable:function(a){return this.options.closable=a,this.updateClosable(),this},setCloseByBackdrop:function(a){return this.options.closeByBackdrop=a,this},canCloseByBackdrop:function(){return this.options.closeByBackdrop},setCloseByKeyboard:function(a){return this.options.closeByKeyboard=a,this},canCloseByKeyboard:function(){return this.options.closeByKeyboard},isAnimate:function(){return this.options.animate},setAnimate:function(a){return this.options.animate=a,this},updateAnimate:function(){return this.isRealized()&&this.getModal().toggleClass("fade",this.isAnimate()),this},getSpinicon:function(){return this.options.spinicon},setSpinicon:function(a){return this.options.spinicon=a,this},addButton:function(a){return this.options.buttons.push(a),this},addButtons:function(b){var c=this;return a.each(b,function(a,b){c.addButton(b)}),this},getButtons:function(){return this.options.buttons},setButtons:function(a){return this.options.buttons=a,this.updateButtons(),this},getButton:function(a){return"undefined"!=typeof this.indexedButtons[a]?this.indexedButtons[a]:null},getButtonSize:function(){return"undefined"!=typeof d.BUTTON_SIZES[this.getSize()]?d.BUTTON_SIZES[this.getSize()]:""},updateButtons:function(){return this.isRealized()&&(0===this.getButtons().length?this.getModalFooter().hide():this.getModalFooter().show().find("."+this.getNamespace("footer")).html("").append(this.createFooterButtons())),this},isAutodestroy:function(){return this.options.autodestroy},setAutodestroy:function(a){this.options.autodestroy=a},getDescription:function(){return this.options.description},setDescription:function(a){return this.options.description=a,this},setTabindex:function(a){return this.options.tabindex=a,this},getTabindex:function(){return this.options.tabindex},updateTabindex:function(){return this.isRealized()&&this.getModal().attr("tabindex",this.getTabindex()),this},getDefaultText:function(){return d.DEFAULT_TEXTS[this.getType()]},getNamespace:function(a){return d.NAMESPACE+"-"+a},createHeaderContent:function(){var b=a("<div></div>");return b.addClass(this.getNamespace("header")),b.append(this.createTitleContent()),b.prepend(this.createCloseButton()),b},createTitleContent:function(){var b=a("<div></div>");return b.addClass(this.getNamespace("title")),b},createCloseButton:function(){var b=a("<div></div>");b.addClass(this.getNamespace("close-button"));var c=a('<button class="close"></button>');return c.append(this.options.closeIcon),b.append(c),b.on("click",{dialog:this},function(a){a.data.dialog.close()}),b},createBodyContent:function(){var b=a("<div></div>");return b.addClass(this.getNamespace("body")),b.append(this.createMessageContent()),b},createMessageContent:function(){var b=a("<div></div>");return b.addClass(this.getNamespace("message")),b},createFooterContent:function(){var b=a("<div></div>");return b.addClass(this.getNamespace("footer")),b},createFooterButtons:function(){var b=this,c=a("<div></div>");return c.addClass(this.getNamespace("footer-buttons")),this.indexedButtons={},a.each(this.options.buttons,function(a,e){e.id||(e.id=d.newGuid());var f=b.createButton(e);b.indexedButtons[e.id]=f,c.append(f)}),c},createButton:function(b){var c=a('<button class="btn"></button>');return c.prop("id",b.id),c.data("button",b),"undefined"!=typeof b.icon&&""!==a.trim(b.icon)&&c.append(this.createButtonIcon(b.icon)),"undefined"!=typeof b.label&&c.append(b.label),"undefined"!=typeof b.cssClass&&""!==a.trim(b.cssClass)?c.addClass(b.cssClass):c.addClass("btn-default"),"undefined"!=typeof b.hotkey&&(this.registeredButtonHotkeys[b.hotkey]=c),c.on("click",{dialog:this,$button:c,button:b},function(a){var b=a.data.dialog,c=a.data.$button,d=c.data("button");return d.autospin&&c.toggleSpin(!0),"function"==typeof d.action?d.action.call(c,b,a):void 0}),this.enhanceButton(c),"undefined"!=typeof b.enabled&&c.toggleEnable(b.enabled),c},enhanceButton:function(a){return a.dialog=this,a.toggleEnable=function(a){var b=this;return"undefined"!=typeof a?b.prop("disabled",!a).toggleClass("disabled",!a):b.prop("disabled",!b.prop("disabled")),b},a.enable=function(){var a=this;return a.toggleEnable(!0),a},a.disable=function(){var a=this;return a.toggleEnable(!1),a},a.toggleSpin=function(b){var c=this,d=c.dialog,e=c.find("."+d.getNamespace("button-icon"));return"undefined"==typeof b&&(b=!(a.find(".icon-spin").length>0)),b?(e.hide(),a.prepend(d.createButtonIcon(d.getSpinicon()).addClass("icon-spin"))):(e.show(),a.find(".icon-spin").remove()),c},a.spin=function(){var a=this;return a.toggleSpin(!0),a},a.stopSpin=function(){var a=this;return a.toggleSpin(!1),a},this},createButtonIcon:function(b){var c=a("<span></span>");return c.addClass(this.getNamespace("button-icon")).addClass(b),c},enableButtons:function(b){return a.each(this.indexedButtons,function(a,c){c.toggleEnable(b)}),this},updateClosable:function(){return this.isRealized()&&this.getModalHeader().find("."+this.getNamespace("close-button")).toggle(this.isClosable()),this},onShow:function(a){return this.options.onshow=a,this},onShown:function(a){return this.options.onshown=a,this},onHide:function(a){return this.options.onhide=a,this},onHidden:function(a){return this.options.onhidden=a,this},isRealized:function(){return this.realized},setRealized:function(a){return this.realized=a,this},isOpened:function(){return this.opened},setOpened:function(a){return this.opened=a,this},handleModalEvents:function(){return this.getModal().on("show.bs.modal",{dialog:this},function(a){var b=a.data.dialog;if(b.setOpened(!0),b.isModalEvent(a)&&"function"==typeof b.options.onshow){var c=b.options.onshow(b);return c===!1&&b.setOpened(!1),c}}),this.getModal().on("shown.bs.modal",{dialog:this},function(a){var b=a.data.dialog;b.isModalEvent(a)&&"function"==typeof b.options.onshown&&b.options.onshown(b)}),this.getModal().on("hide.bs.modal",{dialog:this},function(a){var b=a.data.dialog;if(b.setOpened(!1),b.isModalEvent(a)&&"function"==typeof b.options.onhide){var c=b.options.onhide(b);return c===!1&&b.setOpened(!0),c}}),this.getModal().on("hidden.bs.modal",{dialog:this},function(b){var c=b.data.dialog;c.isModalEvent(b)&&"function"==typeof c.options.onhidden&&c.options.onhidden(c),c.isAutodestroy()&&(c.setRealized(!1),delete d.dialogs[c.getId()],a(this).remove()),d.moveFocus()}),this.handleModalBackdropEvent(),this.getModal().on("keyup",{dialog:this},function(a){27===a.which&&a.data.dialog.isClosable()&&a.data.dialog.canCloseByKeyboard()&&a.data.dialog.close()}),this.getModal().on("keyup",{dialog:this},function(b){var c=b.data.dialog;if("undefined"!=typeof c.registeredButtonHotkeys[b.which]){var d=a(c.registeredButtonHotkeys[b.which]);!d.prop("disabled")&&d.focus().trigger("click")}}),this},handleModalBackdropEvent:function(){return this.getModal().on("click",{dialog:this},function(b){a(b.target).hasClass("modal-backdrop")&&b.data.dialog.isClosable()&&b.data.dialog.canCloseByBackdrop()&&b.data.dialog.close()}),this},isModalEvent:function(a){return"undefined"!=typeof a.namespace&&"bs.modal"===a.namespace},makeModalDraggable:function(){return this.options.draggable&&(this.getModalHeader().addClass(this.getNamespace("draggable")).on("mousedown",{dialog:this},function(a){var b=a.data.dialog;b.draggableData.isMouseDown=!0;var c=b.getModalDialog().offset();b.draggableData.mouseOffset={top:a.clientY-c.top,left:a.clientX-c.left}}),this.getModal().on("mouseup mouseleave",{dialog:this},function(a){a.data.dialog.draggableData.isMouseDown=!1}),a("body").on("mousemove",{dialog:this},function(a){var b=a.data.dialog;b.draggableData.isMouseDown&&b.getModalDialog().offset({top:a.clientY-b.draggableData.mouseOffset.top,left:a.clientX-b.draggableData.mouseOffset.left})})),this},realize:function(){return this.initModalStuff(),this.getModal().addClass(d.NAMESPACE).addClass(this.getCssClass()),this.updateSize(),this.getDescription()&&this.getModal().attr("aria-describedby",this.getDescription()),this.getModalFooter().append(this.createFooterContent()),this.getModalHeader().append(this.createHeaderContent()),this.getModalBody().append(this.createBodyContent()),this.getModal().data("bs.modal",new c(this.getModal(),{backdrop:"static",keyboard:!1,show:!1})),this.makeModalDraggable(),this.handleModalEvents(),this.setRealized(!0),this.updateButtons(),this.updateType(),this.updateTitle(),this.updateMessage(),this.updateClosable(),this.updateAnimate(),this.updateSize(),this.updateTabindex(),this},open:function(){return!this.isRealized()&&this.realize(),this.getModal().modal("show"),this},close:function(){return!this.isRealized()&&this.realize(),this.getModal().modal("hide"),this}},d.prototype=a.extend(d.prototype,d.METHODS_TO_OVERRIDE[c.getModalVersion()]),d.newGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"===a?b:3&b|8;return c.toString(16)})},d.show=function(a){return new d(a).open()},d.alert=function(){var b={},c={type:d.TYPE_DEFAULT,title:null,message:null,closable:!1,draggable:!1,buttonLabel:d.DEFAULT_TEXTS.OK,callback:null};b="object"==typeof arguments[0]&&arguments[0].constructor==={}.constructor?a.extend(!0,c,arguments[0]):a.extend(!0,c,{message:arguments[0],callback:"undefined"!=typeof arguments[1]?arguments[1]:null});var e=new d(b);return e.setData("callback",b.callback),e.addButton({label:b.buttonLabel,action:function(a){return"function"==typeof a.getData("callback")&&a.getData("callback").call(this,!0)===!1?!1:(a.setData("btnClicked",!0),a.close())}}),"function"==typeof e.options.onhide?e.onHide(function(a){var b=!0;return!a.getData("btnClicked")&&a.isClosable()&&"function"==typeof a.getData("callback")&&(b=a.getData("callback")(!1)),b===!1?!1:b=this.onhide(a)}.bind({onhide:e.options.onhide})):e.onHide(function(a){var b=!0;return!a.getData("btnClicked")&&a.isClosable()&&"function"==typeof a.getData("callback")&&(b=a.getData("callback")(!1)),b}),e.open()},d.confirm=function(){var b={},c={type:d.TYPE_DEFAULT,title:"警告",message:null,closable:!0,draggable:!1,btnCancelLabel:d.DEFAULT_TEXTS.CANCEL,btnCancelClass:null,btnOKLabel:d.DEFAULT_TEXTS.OK,btnOKClass:"btn-primary",callback:null,icon:"warning"};b="object"==typeof arguments[0]&&arguments[0].constructor==={}.constructor?a.extend(!0,c,arguments[0]):a.extend(!0,c,{message:arguments[0],callback:"undefined"!=typeof arguments[1]?arguments[1]:null}),null===b.btnOKClass&&(b.btnOKClass=["btn",b.type.split("-")[1]].join("-")),"question"===b.icon?b.message='<i class="icon glyphicon glyphicon-question-sign"></i><p class="iconp">'+b.message+"</p>":b.message='<i class="icon glyphicon glyphicon-warning-sign"></i><p class="iconp">'+b.message+"</p>";var e=new d(b);return e.setData("callback",b.callback),e.addButton({label:b.btnCancelLabel,cssClass:b.btnCancelClass,action:function(a){return"function"==typeof a.getData("callback")&&a.getData("callback").call(this,!1)===!1?!1:a.close()}}),e.addButton({label:b.btnOKLabel,cssClass:b.btnOKClass,action:function(a){return"function"==typeof a.getData("callback")&&a.getData("callback").call(this,!0)===!1?!1:a.close()}}),e.open()},d.warning=function(b,c){var e={},f={type:d.TYPE_DEFAULT,size:d.SIZE_SMALL,title:"警告",message:null,closable:!0,draggable:!1,callback:null,delay:2e3,closeByBackdrop:!1,backdrop:"hidden"};e="object"==typeof arguments[0]&&arguments[0].constructor==={}.constructor?a.extend(!0,f,arguments[0]):a.extend(!0,f,{message:arguments[0],callback:"undefined"!=typeof arguments[1]?arguments[1]:null}),e.message='<i class="icon glyphicon glyphicon-warning-sign"></i><p class="iconp">'+e.message+"</p>";var g=new d(e);return 0!==e.delay&&setTimeout(function(){g.close()},e.delay),g.open()},d.danger=function(b,c){var e={},f={type:d.TYPE_DEFAULT,size:d.SIZE_SMALL,title:"错误",message:null,closable:!0,draggable:!1,callback:null,delay:2e3,closeByBackdrop:!1,backdrop:"hidden"};e="object"==typeof arguments[0]&&arguments[0].constructor==={}.constructor?a.extend(!0,f,arguments[0]):a.extend(!0,f,{message:arguments[0],callback:"undefined"!=typeof arguments[1]?arguments[1]:null}),e.message='<i class="icon glyphicon glyphicon-remove-sign"></i><p class="iconp">'+e.message+"</p>";var g=new d(e);return 0!==e.delay&&setTimeout(function(){g.close()},e.delay),g.open()},d.success=function(b,c){var e={},f={type:d.TYPE_DEFAULT,size:d.SIZE_SMALL,title:"成功",message:null,closable:!0,draggable:!1,callback:null,delay:2e3,closeByBackdrop:!1,backdrop:"hidden"};e="object"==typeof arguments[0]&&arguments[0].constructor==={}.constructor?a.extend(!0,f,arguments[0]):a.extend(!0,f,{message:arguments[0],callback:"undefined"!=typeof arguments[1]?arguments[1]:null}),e.message='<i class="icon glyphicon glyphicon-ok-sign"></i><p class="iconp">'+e.message+"</p>";var g=new d(e);return 0!==e.delay&&setTimeout(function(){g.close()},e.delay),g.open()},d.info=function(){var b={},c={type:d.TYPE_DEFAULT,size:d.SIZE_SMALL,title:"提示",message:null,closable:!0,draggable:!1,callback:null,delay:2e3,closeByBackdrop:!1,backdrop:"hidden"};b="object"==typeof arguments[0]&&arguments[0].constructor==={}.constructor?a.extend(!0,c,arguments[0]):a.extend(!0,c,{message:arguments[0],callback:"undefined"!=typeof arguments[1]?arguments[1]:null}),b.message='<i class="icon glyphicon glyphicon-info-sign"></i><p class="iconp">'+b.message+"</p>";var e=new d(b);return 0!==b.delay&&setTimeout(function(){e.close()},b.delay),e.open()},d}),+function(a,b){function c(a){var b={required:"不能为空",number:"只能填数字",digitalSpace:"只能填数字",digits:"只能填整数",tenMultiple:"只能填10的倍数",alphanumeric:"字母数字混合",length:"长度应该为: "+a.param,minlength:"最小长度为: "+a.param,removeSpaceMin:"最小长度为: "+a.param,removeSpaceMax:"最大长度为: "+a.param,maxlength:"最大长度为: "+a.param,max:"最大值为: "+a.param,min:"最小值为: "+a.param,equalTo:"不一致",notEqual:"与之前的一致",phone:"格式不正确",email:"邮箱格式不正确",regexp:"格式不正确",idCard:"身份证格式不正确",realName:"格式不正确",illegal:"中含有非法字符",dot1:"只能为一位小数的数字",dot2:"只能为两位小数的数字"};return a.message?a.message:b[a.rule]}function d(a){this.items=a,this._init()}function e(a){if(1===a.rules.length)return c(a.rules[0]);for(var b="",d=0;d<a.rules.length;d++)b+='<div class="item-normal clearfix item-'+a.rules[d].rule+'"><span class="icon">'+(d+1)+"</span>"+c(a.rules[d])+"</div>",b+='<div class="item-success clearfix item-'+a.rules[d].rule+'"><span class="icon glyphicon glyphicon-ok"></span>'+c(a.rules[d])+"</div>",b+='<div class="item-error clearfix item-'+a.rules[d].rule+'"><span class="icon glyphicon glyphicon-remove"></span>'+c(a.rules[d])+"</div>";return b}function f(a,b){a.prev().hasClass("magnifier")||(a.prop("maxlength",b.replace(/[^x]/g,"").length),setTimeout(function(){var b=a.position();a.before('<div class="magnifier popover top" style="top:'+(b.top-45)+"px; left: "+b.left+'px;"><div class="arrow"></div><div class="popover-content"><p></p></div></div>')},1e3))}function g(a,c){b.isFunction(c)&&(c=c(el));var d=a.val();if(!n.required(d))return void(a.prev().hasClass("magnifier")&&a.prev().hide());for(var e=d.split(""),f=c.split(""),g="",h=0,i=0;i<f.length;i++)if("x"===f[i])e[h]&&(g+=e[h],h++);else{if(!e[h])break;g+=f[i]}h<e.length&&(g+=d.substr(h,e.length-1)),a.prev().show().find(".popover-content p").text(g)}var h=([].slice,function(a){var b;return a=k(a.replace(RegExp(" ","g"),"")),18===a.length?(b=a.split(""),j(a)&&i(b)?!0:!1):!1}),i=function(a){var b,c,d;for(c=0,"x"===a[17].toLowerCase()&&(a[17]=10),b=0;17>b;)c+=l[b]*a[b],b++;return d=c%11,parseInt(a[17],10)===m[d]?!0:!1},j=function(a){var b,c,d,e;return e=a.substring(6,10),c=a.substring(10,12),b=a.substring(12,14),d=new Date(e,parseFloat(c)-1,parseFloat(b)),d.getFullYear()!==parseFloat(e)||d.getMonth()!==parseFloat(c)-1||d.getDate()!==parseFloat(b)?!1:!0},k=function(a){return a.replace(/(^\s*)|(\s*$)/g,"")},l=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2,1],m=[1,0,10,9,8,7,6,5,4,3,2],n={};n.required=function(a){return a&&a.trim().length>0},n.number=function(a){return/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(a.trim())},n.digitalSpace=function(a){return/^[\d\s]+$/.test(a.trim())},n.digits=function(a){return""===a.trim()?!0:/^\d+$/.test(a)},n.tenMultiple=function(a){return a.trim()>0&&a.trim()%10==0?!0:!1},n.alphanumeric=function(a){return""===a.trim()?!0:/^(([a-z]+[0-9]+)|([0-9]+[a-z]+))[a-z0-9]*$/i.test(a)},n.length=function(a,b){return a.trim().length===Number(b)},n.minlength=function(a,b){return a.trim().length>=Number(b)},n.removeSpaceMin=function(a,b){for(var c=[],d=a.split(""),e=0;e<d.length;e++)-1==d[e].indexOf(" ")&&c.push(d[e]);return c.join("").length>=Number(b)},n.removeSpaceMax=function(a,b){for(var c=[],d=a.split(""),e=0;e<d.length;e++)-1==d[e].indexOf(" ")&&c.push(d[e]);return c.join("").length<=Number(b)},n.maxlength=function(a,b){return a.trim().length<=Number(b)},n.max=function(a,b){return Number(a)<=b},n.min=function(a,b){return Number(a)>=Number(b)},n.equalTo=function(a,b){return a===b},n.notEqual=function(a,b){return a!==b},n.phone=function(a){return""===a.trim()?!0:/^(13|14|15|17|18)[0-9]{9}$/.test(a)},n.email=function(a){return""===a.trim()?!0:/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(a)},n.regexp=function(a,b){return""===a.trim()?!0:b.test(a)},n.idCard=function(a){return""===a.trim()?!0:h(a)},n.realName=function(a){return""===a.trim()?!0:/^[\u4e00-\u9fa5]{2,16}$/.test(a)},n.illegal=function(a){return""===a.trim()?!0:!/[`~!@#$^&*()=|{}\[\].<>\/?~！@#￥……&*（）|{}【】‘”“'？]/.test(a)},n.dot1=function(a){return""===a.trim()?!0:/^[0-9]+(\.[0-9]{1})?$/.test(a)},n.dot2=function(a){return""===a.trim()?!0:/^[0-9]+(\.[0-9]{1,2})?$/.test(a)},d.prototype._init=function(){for(var a=this,b=0;b<this.items.length;b++){var c=this.items[b];a._bindEvent(c)}},d.prototype._bindEvent=function(a){var c=this;a.event?b(a.el).on(a.event,function(){var d=b(this),e=c.validateItem(a,d);e?c._destroyError(d):c._initError(a,d)}):b(a.el).off("focus.bs.validate").on("focus.bs.validate",function(){var d=b(this);a.rules.length>1?(c._initError(a,d),c._showError(d),d.data("blured","0")):c.validateItem(a,d)||c._initError(a,d),a.magnifier&&(f(d,a.magnifier),g(d,a.magnifier))}).off("blur.bs.validate").on("blur.bs.validate",function(){var d=b(this),e=c.validateItem(a,d);e?c._destroyError(d):c._hideError(d),a.magnifier&&d.prev().hasClass("magnifier")&&d.prev().hide(),d.data("blured","1")}).off("keyup.bs.validate").on("keyup.bs.validate",function(){var d=b(this);c._initError(a,d),c.validateItem(a,d),a.magnifier&&g(d,a.magnifier)})},d.prototype.reset=function(){for(var a=0;a<this.items.length;a++)this._removeError(this.items[a].el)},d.prototype.validateItem=function(a,c){for(var d=!0,e=0;e<a.rules.length;e++){var f=a.rules[e];if(b.isFunction(f.rule))d=f.rule(a.el);else{if(!n[f.rule])throw"不支持"+f.rule+"这个验证规则";d=n[f.rule](c.val(),f.param)}if(f.callback){var g=f.callback(d,c);if(g){if(b.isFunction(f.rule))continue;if(b(".popover-content .item-"+f.rule).hide(),!d){c.addClass("validate-border"),b(".popover-content .item-error.item-"+f.rule).show();break}var h=b(".popover-content .item-success.item-"+f.rule);h.length>0?h.show():this._destroyError(c)}}else{if(b.isFunction(f.rule))continue;if(b(".popover-content .item-"+f.rule).hide(),!d){c.addClass("validate-border"),b(".popover-content .item-error.item-"+f.rule).show();break}var h=b(".popover-content .item-success.item-"+f.rule);h.length>0?h.show():this._destroyError(c)}}return d},d.prototype.addRule=function(a){this.items.push(a),this._bindEvent(a)},d.prototype.validate=function(a){a=a||{};for(var c=a.scroller||"html, body",d=a.scrollOffset||50,e=!0,f=!1,g=this,h=0;h<this.items.length;h++){var i=this.items[h],j=b(i.el);if(j.length){var k=null;if(j.length>1)b.each(j,function(a,h){k=b(h),g._initError(i,k),k.data("blured","1");var j=g.validateItem(i,k);j?g._destroyError(k):(e=!1,f||(b(c).animate({scrollTop:k.offset().top-d+"px"}),f=!0))});else{k=j,g._initError(i,k),b(i.el).data("blured","1");var l=this.validateItem(i,k);l?this._destroyError(k):(e=!1,f||(b(c).animate({scrollTop:k.offset().top-d+"px"}),f=!0))}}}return e},d.prototype._initError=function(a,c){if(!c.data("bs.popover")){var d=this,f=e(a);c.popover({content:f,html:!0,placement:a.placement||"bottom",trigger:"hover",template:'<div class="popover validate-popover" role="tooltip"><div class="arrow"></div><div class="popover-content"></div></div>'}),c.on("shown.bs.popover",function(){("1"==b(this).data("blured")||b(this).val())&&d.validateItem(a,b(this))})}},d.prototype._destroyError=function(a){a.removeClass("validate-border"),a.popover("destroy")},d.prototype._showError=function(a){a.popover("show")},d.prototype._hideError=function(a){a.popover("hide")},a.Validation=d}(window,jQuery);var Datepicker;!function(a,b,c){var d,e,f,g="datepicker",h=".datepicker-here",i=!1,j='<div class="datepicker"><i class="datepicker--pointer"></i><nav class="datepicker--nav"></nav><div class="datepicker--content"></div></div>',k={classes:"",inline:!1,language:"zh",startDate:new Date,firstDay:"",weekends:[6,0],dateFormat:"",altField:"",altFieldDateFormat:"@",toggleSelected:!0,keyboardNav:!0,position:"bottom left",offset:12,view:"days",minView:"days",showOtherMonths:!0,selectOtherMonths:!0,moveToOtherMonthsOnSelect:!0,showOtherYears:!0,selectOtherYears:!0,moveToOtherYearsOnSelect:!0,minDate:"",maxDate:"",disableNavWhenOutOfRange:!0,multipleDates:!1,multipleDatesSeparator:",",range:!1,todayButton:!1,clearButton:!1,showEvent:"focus",autoClose:!1,monthsFiled:"monthsShort",prevHtml:'<svg><path d="M 17,12 l -5,5 l 5,5"></path></svg>',nextHtml:'<svg><path d="M 14,12 l 5,5 l -5,5"></path></svg>',navTitles:{days:"MM, <i>yyyy</i>",months:"yyyy",years:"yyyy1 - yyyy2"},timepicker:!1,timeFormat:"hh:ii",onSelect:"",onChangeMonth:"",onChangeYear:"",onChangeDecade:"",onChangeView:"",onRenderCell:"",onShow:""},l={ctrlRight:[17,39],ctrlUp:[17,38],ctrlLeft:[17,37],ctrlDown:[17,40],shiftRight:[16,39],shiftUp:[16,38],shiftLeft:[16,37],shiftDown:[16,40],altUp:[18,38],altRight:[18,39],altLeft:[18,37],altDown:[18,40],ctrlShiftUp:[16,17,38]};Datepicker=function(a,e){this.el=a,this.$el=b(a),e&&e.timepicker?(k.autoClose=!1,k.dateFormat="yyyy-mm-dd hh:ii"):k.autoClose=!0,this.opts=b.extend(!0,{},k,e,this.$el.data()),d==c&&(d=b("body")),this.opts.startDate||(this.opts.startDate=new Date),"INPUT"==this.el.nodeName&&(this.elIsInput=!0),this.opts.altField&&(this.$altField="string"==typeof this.opts.altField?b(this.opts.altField):this.opts.altField),this.inited=!1,this.visible=!1,this.silent=!1,this.currentDate=this.opts.startDate,this.currentView=this.opts.view,this._createShortCuts(),this.selectedDates=[],this.views={},this.keys=[],this.minRange="",this.maxRange="",this.init()},f=Datepicker,f.prototype={viewIndexes:["days","months","years"],init:function(){i||this.opts.inline||!this.elIsInput||this._buildDatepickersContainer(),this._buildBaseHtml(),this._defineLocale(this.opts.language),this._syncWithMinMaxDates(),this.elIsInput&&(this.opts.inline||(this._setPositionClasses(this.opts.position),this._bindEvents()),this.opts.keyboardNav&&this._bindKeyboardEvents(),this.$datepicker.on("mousedown",this._onMouseDownDatepicker.bind(this)),this.$datepicker.on("mouseup",this._onMouseUpDatepicker.bind(this))),this.opts.classes&&this.$datepicker.addClass(this.opts.classes),this.views[this.currentView]=new Datepicker.Body(this,this.currentView,this.opts),this.views[this.currentView].show(),this.nav=new Datepicker.Navigation(this,this.opts),this.view=this.currentView,this.opts.timepicker&&(this.timepicker=new Datepicker.Timepicker(this,this.opts),this._bindTimepickerEvents()),this.$datepicker.on("mouseenter",".datepicker--cell",this._onMouseEnterCell.bind(this)),this.$datepicker.on("mouseleave",".datepicker--cell",this._onMouseLeaveCell.bind(this)),this.inited=!0},_createShortCuts:function(){this.minDate=this.opts.minDate?this.opts.minDate:new Date(-86399999136e5),this.maxDate=this.opts.maxDate?this.opts.maxDate:new Date(86399999136e5)},_bindEvents:function(){this.$el.on(this.opts.showEvent+".adp",this._onShowEvent.bind(this)),this.$el.on("mouseup.adp",this._onMouseUpEl.bind(this)),this.$el.on("blur.adp",this._onBlur.bind(this)),this.$el.on("input.adp",this._onInput.bind(this)),b(a).on("resize.adp",this._onResize.bind(this)),b("body").on("mouseup.adp",this._onMouseUpBody.bind(this))},_bindKeyboardEvents:function(){this.$el.on("keydown.adp",this._onKeyDown.bind(this)),this.$el.on("keyup.adp",this._onKeyUp.bind(this)),this.$el.on("hotKey.adp",this._onHotKey.bind(this))},_bindTimepickerEvents:function(){this.$el.on("timeChange.adp",this._onTimeChange.bind(this))},isWeekend:function(a){return-1!==this.opts.weekends.indexOf(a)},_defineLocale:function(a){"string"==typeof a?(this.loc=Datepicker.language[a],this.loc||(console.warn("Can't find language \""+a+'" in Datepicker.language, will use "ru" instead'),this.loc=b.extend(!0,{},Datepicker.language.ru)),this.loc=b.extend(!0,{},Datepicker.language.ru,Datepicker.language[a])):this.loc=b.extend(!0,{},Datepicker.language.ru,a),this.opts.dateFormat&&(this.loc.dateFormat=this.opts.dateFormat),""!==this.opts.firstDay&&(this.loc.firstDay=this.opts.firstDay)},_buildDatepickersContainer:function(){i=!0,d.append('<div class="datepickers-container" id="datepickers-container"></div>'),e=b("#datepickers-container")},_buildBaseHtml:function(){var a,c=b('<div class="datepicker-inline">');a="INPUT"==this.el.nodeName?this.opts.inline?c.insertAfter(this.$el):e:c.appendTo(this.$el),this.$datepicker=b(j).appendTo(a),this.$content=b(".datepicker--content",this.$datepicker),this.$nav=b(".datepicker--nav",this.$datepicker)},_triggerOnChange:function(){if(!this.selectedDates.length)return this.opts.onSelect("","",this);var a,b=this.selectedDates,c=f.getParsedDate(b[0]),d=this,e=new Date(c.year,c.month,c.date);a=b.map(function(a){return d.formatDate(d.loc.dateFormat,a)}).join(this.opts.multipleDatesSeparator),(this.opts.multipleDates||this.opts.range)&&(e=b.map(function(a){var b=f.getParsedDate(a);return new Date(b.year,b.month,b.date)})),this.opts.onSelect&&this.opts.onSelect(a,e,this)},next:function(){var a=this.parsedDate,b=this.opts;switch(this.view){case"days":this.date=new Date(a.year,a.month+1,1),b.onChangeMonth&&b.onChangeMonth(this.parsedDate.month,this.parsedDate.year);break;case"months":this.date=new Date(a.year+1,a.month,1),b.onChangeYear&&b.onChangeYear(this.parsedDate.year);break;case"years":this.date=new Date(a.year+10,0,1),b.onChangeDecade&&b.onChangeDecade(this.curDecade)}},prev:function(){var a=this.parsedDate,b=this.opts;switch(this.view){case"days":this.date=new Date(a.year,a.month-1,1),b.onChangeMonth&&b.onChangeMonth(this.parsedDate.month,this.parsedDate.year);break;case"months":this.date=new Date(a.year-1,a.month,1),b.onChangeYear&&b.onChangeYear(this.parsedDate.year);break;case"years":this.date=new Date(a.year-10,0,1),b.onChangeDecade&&b.onChangeDecade(this.curDecade)}},formatDate:function(a,b){b=b||this.date;var c=a,d=this.loc,e=f.getDecade(b),g=f.getParsedDate(b);switch(!0){case/@/.test(c):c=c.replace(/@/,b.getTime());case/dd/.test(c):c=c.replace(/\bdd\b/,g.fullDate);case/d/.test(c):c=c.replace(/\bd\b/,g.date);case/DD/.test(c):c=c.replace(/\bDD\b/,d.days[g.day]);case/D/.test(c):c=c.replace(/\bD\b/,d.daysShort[g.day]);case/mm/.test(c):c=c.replace(/\bmm\b/,g.fullMonth);case/m/.test(c):c=c.replace(/\bm\b/,g.month+1);case/MM/.test(c):c=c.replace(/\bMM\b/,this.loc.months[g.month]);case/M/.test(c):c=c.replace(/\bM\b/,d.monthsShort[g.month]);case/ii/.test(c):c=c.replace(/\bii\b/,g.fullMinutes);case/i/.test(c):c=c.replace(/\bi(?!>)\b/,g.minutes);case/hh/.test(c):c=c.replace(/\bhh\b/,g.fullHours);case/h/.test(c):c=c.replace(/\bh\b/,g.hours);case/yyyy/.test(c):c=c.replace(/\byyyy\b/,g.year);case/yyyy1/.test(c):c=c.replace(/\byyyy1\b/,e[0]);case/yyyy2/.test(c):c=c.replace(/\byyyy2\b/,e[1]);case/yy/.test(c):c=c.replace(/\byy\b/,g.year.toString().slice(-2))}return c},selectDate:function(a){var b=this,c=b.opts,d=b.parsedDate,e=b.selectedDates,f=e.length,g="";if(a instanceof Date){if(this.timepicker&&(a.setHours(this.timepicker.hours),a.setMinutes(this.timepicker.minutes)),"days"==b.view&&a.getMonth()!=d.month&&c.moveToOtherMonthsOnSelect&&(g=new Date(a.getFullYear(),a.getMonth(),1)),"years"==b.view&&a.getFullYear()!=d.year&&c.moveToOtherYearsOnSelect&&(g=new Date(a.getFullYear(),0,1)),g&&(b.silent=!0,b.date=g,b.silent=!1,b.nav._render()),c.multipleDates&&!c.range){if(f===c.multipleDates)return;b._isSelected(a)||b.selectedDates.push(a)}else c.range?2==f?(b.selectedDates=[a],b.minRange=a,b.maxRange=""):1==f?(b.selectedDates.push(a),b.maxRange?b.minRange=a:b.maxRange=a,b.selectedDates=[b.minRange,b.maxRange]):(b.selectedDates=[a],b.minRange=a):b.selectedDates=[a];b._setInputValue(),c.onSelect&&b._triggerOnChange(),c.autoClose&&(c.multipleDates||c.range?c.range&&2==b.selectedDates.length&&b.hide():b.hide()),b.views[this.currentView]._render()}},removeDate:function(a){var b=this.selectedDates,c=this;if(a instanceof Date)return b.some(function(d,e){return f.isSame(d,a)?(b.splice(e,1),c.selectedDates.length||(c.minRange="",c.maxRange=""),c.views[c.currentView]._render(),c._setInputValue(),c.opts.onSelect&&c._triggerOnChange(),!0):void 0})},today:function(){this.silent=!0,this.view=this.opts.minView,this.silent=!1,this.date=new Date},clear:function(){this.selectedDates=[],this.minRange="",this.maxRange="",this.views[this.currentView]._render(),this._setInputValue(),this.opts.onSelect&&this._triggerOnChange()},update:function(a,c){var d=arguments.length;return 2==d?this.opts[a]=c:1==d&&"object"==typeof a&&(this.opts=b.extend(!0,this.opts,a)),this._createShortCuts(),this._syncWithMinMaxDates(),this._defineLocale(this.opts.language),this.nav._addButtonsIfNeed(),this.nav._render(),this.views[this.currentView]._render(),this.elIsInput&&!this.opts.inline&&(this._setPositionClasses(this.opts.position),this.visible&&this.setPosition(this.opts.position)),this.opts.classes&&this.$datepicker.addClass(this.opts.classes),this},_syncWithMinMaxDates:function(){var a=this.date.getTime();this.silent=!0,this.minTime>a&&(this.date=this.minDate),this.maxTime<a&&(this.date=this.maxDate),this.silent=!1},_isSelected:function(a,b){return this.selectedDates.some(function(c){return f.isSame(c,a,b)})},_setInputValue:function(){var a,b=this,c=b.opts,d=b.loc.dateFormat,e=c.altFieldDateFormat,f=b.selectedDates.map(function(a){return b.formatDate(d,a)});c.altField&&b.$altField.length&&(a=this.selectedDates.map(function(a){return b.formatDate(e,a)}),a=a.join(this.opts.multipleDatesSeparator),this.$altField.val(a)),f=f.join(this.opts.multipleDatesSeparator),this.$el.val(f)},_isInRange:function(a,b){var c=a.getTime(),d=f.getParsedDate(a),e=f.getParsedDate(this.minDate),g=f.getParsedDate(this.maxDate),h=new Date(d.year,d.month,e.date).getTime(),i=new Date(d.year,d.month,g.date).getTime(),j={day:c>=this.minTime&&c<=this.maxTime,month:h>=this.minTime&&i<=this.maxTime,year:d.year>=e.year&&d.year<=g.year};return b?j[b]:j.day},_getDimensions:function(a){var b=a.offset();return{width:a.outerWidth(),height:a.outerHeight(),left:b.left,top:b.top}},_getDateFromCell:function(a){var b=this.parsedDate,d=a.data("year")||b.year,e=a.data("month")==c?b.month:a.data("month"),f=a.data("date")||1;
return new Date(d,e,f)},_setPositionClasses:function(a){a=a.split(" ");var b=a[0],c=a[1],d="datepicker -"+b+"-"+c+"- -from-"+b+"-";this.visible&&(d+=" active"),this.$datepicker.removeAttr("class").addClass(d)},setPosition:function(a){a=a||this.opts.position;var b,c,d=this._getDimensions(this.$el),e=this._getDimensions(this.$datepicker),f=a.split(" "),g=this.opts.offset,h=f[0],i=f[1];switch(h){case"top":b=d.top-e.height-g;break;case"right":c=d.left+d.width+g;break;case"bottom":b=d.top+d.height+g;break;case"left":c=d.left-e.width-g}switch(i){case"top":b=d.top;break;case"right":c=d.left+d.width-e.width;break;case"bottom":b=d.top+d.height-e.height;break;case"left":c=d.left;break;case"center":/left|right/.test(h)?b=d.top+d.height/2-e.height/2:c=d.left+d.width/2-e.width/2}this.$datepicker.css({left:c,top:b})},show:function(){this.setPosition(this.opts.position),this.$datepicker.addClass("active"),this.visible=!0},hide:function(){this.$datepicker.removeClass("active").css({left:"-100000px"}),this.focused="",this.keys=[],this.inFocus=!1,this.visible=!1,this.$el.blur()},down:function(a){this._changeView(a,"down")},up:function(a){this._changeView(a,"up")},_changeView:function(a,b){a=a||this.focused||this.date;var c="up"==b?this.viewIndex+1:this.viewIndex-1;c>2&&(c=2),0>c&&(c=0),this.silent=!0,this.date=new Date(a.getFullYear(),a.getMonth(),1),this.silent=!1,this.view=this.viewIndexes[c]},_handleHotKey:function(a){var b,c,d,e=f.getParsedDate(this._getFocusedDate()),g=this.opts,h=!1,i=!1,j=!1,k=e.year,l=e.month,m=e.date;switch(a){case"ctrlRight":case"ctrlUp":l+=1,h=!0;break;case"ctrlLeft":case"ctrlDown":l-=1,h=!0;break;case"shiftRight":case"shiftUp":i=!0,k+=1;break;case"shiftLeft":case"shiftDown":i=!0,k-=1;break;case"altRight":case"altUp":j=!0,k+=10;break;case"altLeft":case"altDown":j=!0,k-=10;break;case"ctrlShiftUp":this.up()}d=f.getDaysCount(new Date(k,l)),c=new Date(k,l,m),m>d&&(m=d),c.getTime()<this.minTime?c=this.minDate:c.getTime()>this.maxTime&&(c=this.maxDate),this.focused=c,b=f.getParsedDate(c),h&&g.onChangeMonth&&g.onChangeMonth(b.month,b.year),i&&g.onChangeYear&&g.onChangeYear(b.year),j&&g.onChangeDecade&&g.onChangeDecade(this.curDecade)},_registerKey:function(a){var b=this.keys.some(function(b){return b==a});b||this.keys.push(a)},_unRegisterKey:function(a){var b=this.keys.indexOf(a);this.keys.splice(b,1)},_isHotKeyPressed:function(){var a,b=!1,c=this,d=this.keys.sort();for(var e in l)a=l[e],d.length==a.length&&a.every(function(a,b){return a==d[b]})&&(c._trigger("hotKey",e),b=!0);return b},_trigger:function(a,b){this.$el.trigger(a,b)},_focusNextCell:function(a,b){b=b||this.cellType;var c=f.getParsedDate(this._getFocusedDate()),d=c.year,e=c.month,g=c.date;if(!this._isHotKeyPressed()){switch(a){case 37:"day"==b?g-=1:"","month"==b?e-=1:"","year"==b?d-=1:"";break;case 38:"day"==b?g-=7:"","month"==b?e-=3:"","year"==b?d-=4:"";break;case 39:"day"==b?g+=1:"","month"==b?e+=1:"","year"==b?d+=1:"";break;case 40:"day"==b?g+=7:"","month"==b?e+=3:"","year"==b?d+=4:""}var h=new Date(d,e,g);h.getTime()<this.minTime?h=this.minDate:h.getTime()>this.maxTime&&(h=this.maxDate),this.focused=h}},_getFocusedDate:function(){var a=this.focused||this.selectedDates[this.selectedDates.length-1],b=this.parsedDate;if(!a)switch(this.view){case"days":a=new Date(b.year,b.month,(new Date).getDate());break;case"months":a=new Date(b.year,b.month,1);break;case"years":a=new Date(b.year,0,1)}return a},_getCell:function(a,b){b=b||this.cellType;var c,d=f.getParsedDate(a),e='.datepicker--cell[data-year="'+d.year+'"]';switch(b){case"month":e='[data-month="'+d.month+'"]';break;case"day":e+='[data-month="'+d.month+'"][data-date="'+d.date+'"]'}return c=this.views[this.currentView].$el.find(e),c.length?c:""},destroy:function(){var a=this;a.$el.off(".adp").data("datepicker",""),a.selectedDates=[],a.focused="",a.views={},a.keys=[],a.minRange="",a.maxRange="",a.opts.inline||!a.elIsInput?a.$datepicker.closest(".datepicker-inline").remove():a.$datepicker.remove()},_onShowEvent:function(){var a=this.opts;if(a.onShow){var b=a.onShow();if(b===!1)return}this.visible||this.show()},_onBlur:function(){!this.inFocus&&this.visible&&this.hide()},_onMouseDownDatepicker:function(a){this.inFocus=!0},_onMouseUpDatepicker:function(a){this.inFocus=!1,a.originalEvent.inFocus=!0,a.originalEvent.timepickerFocus||this.$el.focus()},_onInput:function(){var a=this.$el.val();a||this.clear()},_onResize:function(){this.visible&&this.setPosition()},_onMouseUpBody:function(a){a.originalEvent.inFocus||this.visible&&!this.inFocus&&this.hide()},_onMouseUpEl:function(a){a.originalEvent.inFocus=!0},_onKeyDown:function(a){var b=a.which;if(this._registerKey(b),b>=37&&40>=b&&(a.preventDefault(),this._focusNextCell(b)),13==b&&this.focused){if(this._getCell(this.focused).hasClass("-disabled-"))return;if(this.view!=this.opts.minView)this.down();else{var c=this._isSelected(this.focused,this.cellType);c?c&&this.opts.toggleSelected&&this.removeDate(this.focused):this.selectDate(this.focused)}}27==b&&this.hide()},_onKeyUp:function(a){var b=a.which;this._unRegisterKey(b)},_onHotKey:function(a,b){this._handleHotKey(b)},_onMouseEnterCell:function(a){var c=b(a.target).closest(".datepicker--cell"),d=this._getDateFromCell(c);this.silent=!0,this.focused&&(this.focused=""),c.addClass("-focus-"),this.focused=d,this.silent=!1,this.opts.range&&1==this.selectedDates.length&&(this.minRange=this.selectedDates[0],this.maxRange="",f.less(this.minRange,this.focused)&&(this.maxRange=this.minRange,this.minRange=""),this.views[this.currentView]._update())},_onMouseLeaveCell:function(a){var c=b(a.target).closest(".datepicker--cell");c.removeClass("-focus-"),this.silent=!0,this.focused="",this.silent=!1},_onTimeChange:function(a,b,c){var d=new Date,e=this.selectedDates,f=!1;e.length&&(f=!0,d=this.selectedDates[this.selectedDates.length-1]),d.setHours(b),d.setMinutes(c),f?(this.selectedDates[e.length-1]=d,this._setInputValue(),this._triggerOnChange()):this.selectDate(d)},set focused(a){if(!a&&this.focused){var b=this._getCell(this.focused);b.length&&b.removeClass("-focus-")}this._focused=a,this.opts.range&&1==this.selectedDates.length&&(this.minRange=this.selectedDates[0],this.maxRange="",f.less(this.minRange,this._focused)&&(this.maxRange=this.minRange,this.minRange="")),this.silent||(this.date=a)},get focused(){return this._focused},get parsedDate(){return f.getParsedDate(this.date)},set date(a){return a instanceof Date?(this.currentDate=a,this.inited&&!this.silent&&(this.views[this.view]._render(),this.nav._render(),this.visible&&this.elIsInput&&this.setPosition()),a):void 0},get date(){return this.currentDate},set view(a){return this.viewIndex=this.viewIndexes.indexOf(a),this.viewIndex<0?void 0:(this.prevView=this.currentView,this.currentView=a,this.inited&&(this.views[a]?this.views[a]._render():this.views[a]=new Datepicker.Body(this,a,this.opts),this.views[this.prevView].hide(),this.views[a].show(),this.nav._render(),this.opts.onChangeView&&this.opts.onChangeView(a),this.elIsInput&&this.visible&&this.setPosition()),a)},get view(){return this.currentView},get cellType(){return this.view.substring(0,this.view.length-1)},get minTime(){var a=f.getParsedDate(this.minDate);return new Date(a.year,a.month,a.date).getTime()},get maxTime(){var a=f.getParsedDate(this.maxDate);return new Date(a.year,a.month,a.date).getTime()},get curDecade(){return f.getDecade(this.date)}},f.getDaysCount=function(a){return new Date(a.getFullYear(),a.getMonth()+1,0).getDate()},f.getParsedDate=function(a){return{year:a.getFullYear(),month:a.getMonth(),fullMonth:a.getMonth()+1<10?"0"+(a.getMonth()+1):a.getMonth()+1,date:a.getDate(),fullDate:a.getDate()<10?"0"+a.getDate():a.getDate(),day:a.getDay(),hours:a.getHours(),fullHours:a.getHours()<10?"0"+a.getHours():a.getHours(),minutes:a.getMinutes(),fullMinutes:a.getMinutes()<10?"0"+a.getMinutes():a.getMinutes()}},f.getDecade=function(a){var b=10*Math.floor(a.getFullYear()/10);return[b,b+9]},f.template=function(a,b){return a.replace(/#\{([\w]+)\}/g,function(a,c){return b[c]||0===b[c]?b[c]:void 0})},f.isSame=function(a,b,c){if(!a||!b)return!1;var d=f.getParsedDate(a),e=f.getParsedDate(b),g=c?c:"day",h={day:d.date==e.date&&d.month==e.month&&d.year==e.year,month:d.month==e.month&&d.year==e.year,year:d.year==e.year};return h[g]},f.less=function(a,b,c){return a&&b?b.getTime()<a.getTime():!1},f.bigger=function(a,b,c){return a&&b?b.getTime()>a.getTime():!1},Datepicker.language={zh:{days:["周日","周一","周二","周三","周四","周五","周六"],daysShort:["日","一","二","三","四","五","六"],daysMin:["日","一","二","三","四","五","六"],months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthsShort:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],today:"今天",clear:"清除",dateFormat:"yyyy-mm-dd",firstDay:1}},b.fn[g]=function(a){return this.each(function(){if(b.data(this,g)){var c=b.data(this,g);c.opts=b.extend(!0,c.opts,a),c.update()}else b.data(this,g,new Datepicker(this,a))})},b(function(){b(h).datepicker()})}(window,jQuery),function(){var a={days:'<div class="datepicker--days datepicker--body"><div class="datepicker--days-names"></div><div class="datepicker--cells datepicker--cells-days"></div></div>',months:'<div class="datepicker--months datepicker--body"><div class="datepicker--cells datepicker--cells-months"></div></div>',years:'<div class="datepicker--years datepicker--body"><div class="datepicker--cells datepicker--cells-years"></div></div>'},b=Datepicker;b.Body=function(a,b,c){this.d=a,this.type=b,this.opts=c,this.init()},b.Body.prototype={init:function(){this._buildBaseHtml(),this._render(),this._bindEvents()},_bindEvents:function(){this.$el.on("click",".datepicker--cell",$.proxy(this._onClickCell,this))},_buildBaseHtml:function(){this.$el=$(a[this.type]).appendTo(this.d.$content),this.$names=$(".datepicker--days-names",this.$el),this.$cells=$(".datepicker--cells",this.$el)},_getDayNamesHtml:function(a,b,c,d){return b=void 0!=b?b:a,c=c?c:"",d=void 0!=d?d:0,d>7?c:7==b?this._getDayNamesHtml(a,0,c,++d):(c+='<div class="datepicker--day-name'+(this.d.isWeekend(b)?" -weekend-":"")+'">'+this.d.loc.daysMin[b]+"</div>",this._getDayNamesHtml(a,++b,c,++d))},_getCellContents:function(a,c){var d="datepicker--cell datepicker--cell-"+c,e=new Date,f=this.d,g=f.opts,h=b.getParsedDate(a),i={},j=h.date;switch(g.onRenderCell&&(i=g.onRenderCell(a,c)||{},j=i.html?i.html:j,d+=i.classes?" "+i.classes:""),c){case"day":f.isWeekend(h.day)&&(d+=" -weekend-"),h.month!=this.d.parsedDate.month&&(d+=" -other-month-",g.selectOtherMonths||(d+=" -disabled-"),g.showOtherMonths||(j=""));break;case"month":j=f.loc[f.opts.monthsFiled][h.month];break;case"year":var k=f.curDecade;j=h.year,(h.year<k[0]||h.year>k[1])&&(d+=" -other-decade-",g.selectOtherYears||(d+=" -disabled-"),g.showOtherYears||(j=""))}return g.onRenderCell&&(i=g.onRenderCell(a,c)||{},j=i.html?i.html:j,d+=i.classes?" "+i.classes:""),g.range&&(b.isSame(f.minRange,a,c)&&(d+=" -range-from-"),b.isSame(f.maxRange,a,c)&&(d+=" -range-to-"),1==f.selectedDates.length&&f.focused?((b.bigger(f.minRange,a)&&b.less(f.focused,a)||b.less(f.maxRange,a)&&b.bigger(f.focused,a))&&(d+=" -in-range-"),b.less(f.maxRange,a)&&b.isSame(f.focused,a)&&(d+=" -range-from-"),b.bigger(f.minRange,a)&&b.isSame(f.focused,a)&&(d+=" -range-to-")):2==f.selectedDates.length&&b.bigger(f.minRange,a)&&b.less(f.maxRange,a)&&(d+=" -in-range-")),b.isSame(e,a,c)&&(d+=" -current-"),f.focused&&b.isSame(a,f.focused,c)&&(d+=" -focus-"),f._isSelected(a,c)&&(d+=" -selected-"),(!f._isInRange(a,c)||i.disabled)&&(d+=" -disabled-"),{html:j,classes:d}},_getDaysHtml:function(a){var c=b.getDaysCount(a),d=new Date(a.getFullYear(),a.getMonth(),1).getDay(),e=new Date(a.getFullYear(),a.getMonth(),c).getDay(),f=d-this.d.loc.firstDay,g=6-e+this.d.loc.firstDay;f=0>f?f+7:f,g=g>6?g-7:g;for(var h,i,j=-f+1,k="",l=j,m=c+g;m>=l;l++)i=a.getFullYear(),h=a.getMonth(),k+=this._getDayHtml(new Date(i,h,l));return k},_getDayHtml:function(a){var b=this._getCellContents(a,"day");return'<div class="'+b.classes+'" data-date="'+a.getDate()+'" data-month="'+a.getMonth()+'" data-year="'+a.getFullYear()+'">'+b.html+"</div>"},_getMonthsHtml:function(a){for(var c="",d=b.getParsedDate(a),e=0;12>e;)c+=this._getMonthHtml(new Date(d.year,e)),e++;return c},_getMonthHtml:function(a){var b=this._getCellContents(a,"month");return'<div class="'+b.classes+'" data-month="'+a.getMonth()+'">'+b.html+"</div>"},_getYearsHtml:function(a){var c=(b.getParsedDate(a),b.getDecade(a)),d=c[0]-1,e="",f=d;for(f;f<=c[1]+1;f++)e+=this._getYearHtml(new Date(f,0));return e},_getYearHtml:function(a){var b=this._getCellContents(a,"year");return'<div class="'+b.classes+'" data-year="'+a.getFullYear()+'">'+b.html+"</div>"},_renderTypes:{days:function(){var a=this._getDayNamesHtml(this.d.loc.firstDay),b=this._getDaysHtml(this.d.currentDate);this.$cells.html(b),this.$names.html(a)},months:function(){var a=this._getMonthsHtml(this.d.currentDate);this.$cells.html(a)},years:function(){var a=this._getYearsHtml(this.d.currentDate);this.$cells.html(a)}},_render:function(){this._renderTypes[this.type].bind(this)()},_update:function(){var a,b,c,d=$(".datepicker--cell",this.$cells),e=this;d.each(function(d,f){b=$(this),c=e.d._getDateFromCell($(this)),a=e._getCellContents(c,e.d.cellType),b.attr("class",a.classes)})},show:function(){this.$el.addClass("active"),this.acitve=!0},hide:function(){this.$el.removeClass("active"),this.active=!1},_handleClick:function(a){var b=a.data("date")||1,c=a.data("month")||0,d=a.data("year")||this.d.parsedDate.year;if(this.d.view!=this.opts.minView)return void this.d.down(new Date(d,c,b));var e=new Date(d,c,b),f=this.d._isSelected(e,this.d.cellType);f?f&&this.opts.toggleSelected&&this.d.removeDate(e):this.d.selectDate(e)},_onClickCell:function(a){var b=$(a.target).closest(".datepicker--cell");b.hasClass("-disabled-")||this._handleClick.bind(this)(b)}}}(),function(){var a='<div class="datepicker--nav-action" data-action="prev">#{prevHtml}</div><div class="datepicker--nav-title">#{title}</div><div class="datepicker--nav-action" data-action="next">#{nextHtml}</div>',b='<div class="datepicker--buttons"></div>',c='<span class="datepicker--button" data-action="#{action}">#{label}</span>';Datepicker.Navigation=function(a,b){this.d=a,this.opts=b,this.$buttonsContainer="",this.init()},Datepicker.Navigation.prototype={init:function(){this._buildBaseHtml(),this._bindEvents()},_bindEvents:function(){this.d.$nav.on("click",".datepicker--nav-action",$.proxy(this._onClickNavButton,this)),this.d.$nav.on("click",".datepicker--nav-title",$.proxy(this._onClickNavTitle,this)),this.d.$datepicker.on("click",".datepicker--button",$.proxy(this._onClickNavButton,this))},_buildBaseHtml:function(){this._render(),this._addButtonsIfNeed()},_addButtonsIfNeed:function(){this.opts.todayButton&&this._addButton("today"),this.opts.clearButton&&this._addButton("clear")},_render:function(){var b=this._getTitle(this.d.currentDate),c=Datepicker.template(a,$.extend({title:b},this.opts));this.d.$nav.html(c),"years"==this.d.view&&$(".datepicker--nav-title",this.d.$nav).addClass("-disabled-"),this.setNavStatus()},_getTitle:function(a){return this.d.formatDate(this.opts.navTitles[this.d.view],a)},_addButton:function(a){this.$buttonsContainer.length||this._addButtonsContainer();var b={action:a,label:this.d.loc[a]},d=Datepicker.template(c,b);$("[data-action="+a+"]",this.$buttonsContainer).length||this.$buttonsContainer.append(d)},_addButtonsContainer:function(){this.d.$datepicker.append(b),this.$buttonsContainer=$(".datepicker--buttons",this.d.$datepicker)},setNavStatus:function(){if((this.opts.minDate||this.opts.maxDate)&&this.opts.disableNavWhenOutOfRange){var a=this.d.parsedDate,b=a.month,c=a.year,d=a.date;switch(this.d.view){case"days":this.d._isInRange(new Date(c,b-1,d),"month")||this._disableNav("prev"),this.d._isInRange(new Date(c,b+1,d),"month")||this._disableNav("next");break;case"months":this.d._isInRange(new Date(c-1,b,d),"year")||this._disableNav("prev"),this.d._isInRange(new Date(c+1,b,d),"year")||this._disableNav("next");break;case"years":this.d._isInRange(new Date(c-10,b,d),"year")||this._disableNav("prev"),this.d._isInRange(new Date(c+10,b,d),"year")||this._disableNav("next")}}},_disableNav:function(a){$('[data-action="'+a+'"]',this.d.$nav).addClass("-disabled-")},_activateNav:function(a){$('[data-action="'+a+'"]',this.d.$nav).removeClass("-disabled-")},_onClickNavButton:function(a){var b=$(a.target).closest("[data-action]"),c=b.data("action");this.d[c]()},_onClickNavTitle:function(a){return $(a.target).hasClass("-disabled-")?void 0:"days"==this.d.view?this.d.view="months":void(this.d.view="years")}}}(),function(a,b,c){var d='<div class="datepicker--time"><div class="datepicker--time-sliders">   <label class="datepicker--time-label">#{hourLabel}</label>   <div class="datepicker--time-row">      <input type="range" name="hours" value="#{hourValue}" min="#{hourMin}" max="#{hourMax}" step="#{hourStep}"/>   </div>   <label class="datepicker--time-label">#{minLabel}</label>   <div class="datepicker--time-row">      <input type="range" name="minutes" value="#{minValue}" min="#{minMin}" max="#{minMax}" step="#{minStep}"/>   </div></div><div class="datepicker--time-current">   <input type="text" value="#{hourValue}" placeholder="#{hourValue}" data-field="hours" name="hours-current" maxlength="2" data-max="#{hourMax}" data-action="next"/>   <span>:</span>   <input type="text" value="#{minValue}" placeholder="#{minValue}" data-field="minutes" name="minutes-current" maxlength="2" data-max="59" data-action="prev"/></div></div>',e=10;c.Timepicker=function(a,b){this.d=a,this.opts=b;var c=this.d.parsedDate;this.minutes=c.minutes,this.hours=c.hours,this._minutes=c.minutes,this._hours=c.hours,this.init()},c.Timepicker.prototype={init:function(){var a="input";this._buildHTML(),navigator.userAgent.match(/trident/gi)&&(a="change"),this.$ranges.on(a,this._onChangeRange.bind(this)),this.$currentInputs.on("mouseup",this._onMouseUpInput.bind(this)),this.$currentInputs.on("keydown",this._onKeyPressInput.bind(this)),this.$currentInputs.on("input",this._onInputInput.bind(this)),this.$currentInputs.on("blur",this._onBlurInput.bind(this)),this.$currentInputs.on("paste",this._onPasteInput.bind(this))},_buildHTML:function(){var a=this.d.parsedDate,e={hourMin:"00",hourMax:"23",hourStep:"1",hourValue:a.fullHours,hourLabel:"Часы",minMin:"00",minMax:"59",minStep:"1",minValue:a.fullMinutes,minLabel:"Минуты"},f=c.template(d,e);this.$timepicker=b(f).appendTo(this.d.$datepicker),this.$ranges=b('[type="range"]',this.$timepicker),this.$currentTime=b(".datepicker--time-current",this.$timepicker),this.$currentInputs=b('input[type="text"]',this.$timepicker),this.$hoursText=b('[name="hours-current"]',this.$timepicker),this.$minutesText=b('[name="minutes-current"]',this.$timepicker)},_render:function(){},_updateTime:function(){var a=this.hours<10?"0"+this.hours:this.hours,b=this.minutes<10?"0"+this.minutes:this.minutes;this.$hoursText.val(a),this.$minutesText.val(b)},_onChangeRange:function(a){var c=b(a.target),d=c.val(),e=c.attr("name");this[e]=d,this._updateTime(),this.d._trigger("timeChange",[this.hours,this.minutes])},_onMouseUpInput:function(a){a.originalEvent.inFocus=!0,a.originalEvent.timepickerFocus=!0},_onKeyPressInput:function(a){var c,d=b(a.target),f=(d.data("field"),d.data("max")),g=this,h=a.which,i=d.data("action"),j=d.val(),k=d.val();return setTimeout(function(){return k=d.val(),c=parseInt(k),c>f?void d.val(j):(2==k.length&&"next"==i&&h>=48&&57>=h&&g.$minutesText.focus().select(),void(k.length||"prev"==i&&8==h&&(g.$hoursText.focus(),g.$hoursText[0].selectionStart=2,g.$hoursText[0].selectionEnd=2)))},e),h>=48&&57>=h||h>=37&&40>=h||h>=96&&105>=h||17==h||13==h||46==h||8==h||9==h},_onInputInput:function(a){var c=b(a.target),d=this,f=c.data("field"),g=c.data("max"),h=parseInt(c.val());setTimeout(function(){h=parseInt(c.val()),h>g?(h=g,c.val(h)):h||(h=d["_"+f]),d[f]=h,b('[name="'+f+'"]').val(h),d.d._trigger("timeChange",[d.hours,d.minutes])},e)},_onBlurInput:function(a){var c=b(a.target),d=c.val();1==d.length&&(d="0"+d,c.val(d))},_onPasteInput:function(a){var c=b(a.target),d=c.val();setTimeout(function(){d=c.val().replace(/\D/gi,""),c.val(d)},e)}}}(window,jQuery,Datepicker),!function(a){var b=function(b,c){this.$el=a(b),this.opts=c};b.prototype={_initLayout:function(){var b=this,c=this.$el,d=this.opts;c.addClass("mmPaginator").addClass(d.style);var e=[];d.showTotalCount&&e.push('<div class="totalCountLabel"></div>'),d.showLimitList&&e.push('<div class="limit"><select></select></div>'),e.push('<ul class="pageList"></ul>'),d.showJumpBox&&e.push('<div class="jump-box">转到第 <input type="number" min="1" onkeyup="this.value=this.value.replace(/D/, \'\');"> 页</div>'),c.append(a(e.join(""))),this.$totalCountLabel=c.find(".totalCountLabel"),this.$pageList=c.find(".pageList"),this.$limitList=c.find(".limit select"),this.$jumpbox=c.find(".jump-box input");var f=this.$limitList;a.each(d.limitList,function(){var c=a("<option></option>").prop("value",this).text(b.formatString(d.limitLabel,[this]));f.append(c)}),f.on("change",function(a){c.data("page",1),c.trigger("limit.change",+a.target.value),b.$mmGrid&&b.$mmGrid.load()}),this.$jumpbox.on("keydown",function(a){if(a.target.value&&13===a.keyCode){var d=+a.target.value;c.data("page",d),b.load(),b.$mmGrid&&b.$mmGrid.load(),a.target.value="";var e=c.data("totalCount"),f=c.data("limit"),g=e%f===0?parseInt(e/f):parseInt(e/f)+1;g=g?g:0,d>g&&(d=g),c.trigger("page.change",d)}})},_plain:function(b,c,d){var e=this,f=this.$el,g=this.$pageList,h=this.opts,i=c%d===0?parseInt(c/d):parseInt(c/d)+1;i=i?i:0,0===i?b=1:b>i?b=i:1>b&&0!=i&&(b=1);var j=a('<li class="prev"><a>'+h.prev+"</a></li>");1>=b?j.addClass("disable"):j.on("click",function(){f.data("page",b-1),e.$mmGrid&&e.$mmGrid.load(),f.trigger("page.change",b-1)}),g.append(j);var k=[1];b>4&&k.push("...");for(var l=0;5>l;l++){var m=b-2+l;m>1&&i-1>=m&&k.push(m)}i-1>b+1&&k.push("..."),i>1&&k.push(i),a.each(k,function(c,d){var h=a("<li><a></a></li>");"..."===d?h.addClass("").html("..."):d===b?h.addClass("active").find("a").text(d):h.text(d).prop("title","第"+d+"页").on("click",function(a){f.data("page",d),e.$mmGrid&&e.$mmGrid.load(),f.trigger("page.change",d)}),g.append(h)});var n=a('<li class="next"><a title="下一页">'+h.next+"</a></li>");b>=i?n.addClass("disable"):n.on("click",function(){f.data("page",b+1),e.$mmGrid&&e.$mmGrid.load(),f.trigger("page.change",b+1)}),g.append(n)},_search:function(a,b,c){},load:function(a){var b=this.$el,c=this.$limitList,d=this.opts;a||(a={});var e=a[d.pageParamName];(void 0===e||null===e)&&(e=b.data("page")),b.data("page",e);var f=a[d.totalCountName]||d[d.totalCountName];void 0===f&&(f=0),b.data("totalCount",f);var g=a[d.limitParamName];return g||(g=c.val()||10),this.$limitList.val(g),this.$totalCountLabel.html(this.formatString(d.totalCountLabel,[f])),this.$pageList.empty(),b.data("limit",g),this._plain(e,f,g),this},formatString:function(a,b){return a.replace(/{(\d+)}/g,function(a,c){return"undefined"!=typeof b[c]?b[c]:a})},params:function(){var a=this.opts,b=this.$el,c=this.$limitList,d={};return a.params?d=a.params({page:b.data("page"),limit:c.val()}):(d[a.pageParamName]=b.data("page"),d[a.limitParamName]=c.val()),d},init:function(a){var b=this,c=b.opts;this.$mmGrid=a,this._initLayout(),a&&this.$mmGrid.on("loadSuccess",function(a,c){b.load(c)});var d={};if(d[c.totalCountName]=0,d[c.pageParamName]=c.page,d[c.limitParamName]=c.limit,this.load(d),a&&a.opts.indexCol){var e=a.opts.cols[0];e.renderer=function(a,d,e){var f=b.params();return'<label class="mmg-index">'+(e+1+(f[c.pageParamName]-1)*f[c.limitParamName])+"</label>"}}return this}},a.fn.paginator=function(){if(0===arguments.length||"object"==typeof arguments[0]){var c=arguments[0],d=this.data("mmPaginator"),e=a.extend(!1,{},a.fn.paginator.defaults,c);return d||(d=new b(this[0],e),"grid"!==e.role&&d.init().load({totalCount:e[e.totalCountName]}),this.data("mmPaginator",d)),a.extend(!0,this,d)}if("string"==typeof arguments[0]){var d=this.data("mmPaginator"),f=d[arguments[0]];if(f){var g=Array.prototype.slice.call(arguments);return f.apply(d,g.slice(1))}}},a.fn.paginator.defaults={style:"plain",totalCountName:"totalCount",page:1,totalCount:0,pageParamName:"page",limitParamName:"limit",limitLabel:"每页 {0} 条",totalCountLabel:"共 <span>{0}</span> 条记录",showTotalCount:!0,showLimitList:!0,showJumpBox:!0,prev:"上一页",next:"下一页",limit:10,limitList:[10,20,30,40,50]},a.fn.paginator.Constructor=b}(window.jQuery);
